# 009 — Server: GraphQL Task Mutations with Concurrency\n\nSpec refs: §§5,6,8,10,13\n\n## Summary\nImplement mutations: createTask, updateTask, completeTask, abandonTask, restoreTask, with validation, permissions, and concurrency checks.\n\n## Scope\n- Mutations implement status rules:\n  - complete: sets done + completedAt/By (only from todo)\n  - abandon: sets abandoned + abandonedAt/By (only from todo)\n  - restore: only from abandoned -> todo (clear abandoned fields)\n- Validation: title/description lengths; tag constraints; schedule/deadline bounds\n- Concurrency: `lastKnownUpdatedAt` handling, return `CONFLICT_STALE_WRITE` on mismatch\n\n## Acceptance Criteria\n- Only members may create/edit; archived projects are read-only (reject writes)\n- Assignee default = creator if not provided\n- Tags persisted in task_tags\n\n## Dependencies\n- 008, 004, 006\n\n## Implementation Steps\n1) Inputs and validation\n2) Status transition guards\n3) Concurrency compare and error handling\n4) Tag linking updates\n5) Immediate read-after-write query helper\n\n## Tests\n- Status transitions\n- Concurrency rejections\n- Archived project write rejection\n

Note: When you complete this ticket, update todo-app-implementation-sequencing-plan.md to check off .rovodev/todo-app-009_server_graphql_tasks_mutations.md in the appropriate wave.
