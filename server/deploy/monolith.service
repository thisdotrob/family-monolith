[Unit]
Description=Monolith backend
After=network-online.target
Wants=network-online.target

[Service]
Type=simple
ExecStart=/usr/local/bin/monolith-backend
Restart=on-failure
RestartSec=5s
User=pi
WorkingDirectory=/home/pi/monolith
# Allow binding to privileged port 443 without running as root
AmbientCapabilities=CAP_NET_BIND_SERVICE
CapabilityBoundingSet=CAP_NET_BIND_SERVICE
NoNewPrivileges=true
Environment=RUST_LOG=info
# Optional: set TLS cert/key paths explicitly (otherwise defaults from src/config.rs are used)
Environment=TLS_CERT_PATH=/etc/letsencrypt/live/blobfishapp.duckdns.org/fullchain.pem
Environment=TLS_KEY_PATH=/etc/letsencrypt/live/blobfishapp.duckdns.org/privkey.pem

[Install]
WantedBy=multi-user.target
