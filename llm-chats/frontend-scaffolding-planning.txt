╭─────────────────────────────────────────────────────────────╮
│  > Now follow the instructions in @llm-prompts/planning.md  │
╰─────────────────────────────────────────────────────────────╯

 ╭────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
 │ ✔  ReadManyFiles Will attempt to read and concatenate files using patterns: `llm-prompts/planning.md` (within target directory: `/Users/rob.s/src/github.com/thisdotrob/fami…  │
 │                                                                                                                                                                                │
 │    ### ReadManyFiles Result (Target Dir: `/Users/rob.s/src/github.com/thisdotrob/family-monolith/monolith-frontend`)                                                           │
 │                                                                                                                                                                                │
 │    Successfully read and concatenated content from **1 file(s)**.                                                                                                              │
 │                                                                                                                                                                                │
 │    **Processed Files:**                                                                                                                                                        │
 │    - `llm-prompts/planning.md`                                                                                                                                                 │
 ╰────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
✦ Of course. I will now create a detailed, step-by-step implementation plan based on our specification. This plan will be broken down into a series of prompts, each saved as a
  separate markdown file. These prompts are designed to be used by a code-generation LLM to build the project incrementally.

  I will start by creating the prompts for the web application first, followed by the mobile application, and finally the deployment documentation.

  I will now create the first prompt file.
 ╭────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
 │ ✔  WriteFile Writing to 01-feat(webapp)-...-dependencies.md                                                                                                                    │
 │                                                                                                                                                                                │
 │     1 You are an expert software engineer. Your task is to implement the first step in building our Family Monolith web application.                                           │
 │     2                                                                                                                                                                          │
 │     3 **Commit Title:** `feat(webapp): initialize project and install dependencies`                                                                                            │
 │     4                                                                                                                                                                          │
 │     5 ## 1. Project Initialization                                                                                                                                             │
 │     6                                                                                                                                                                          │
 │     7 First, create a new Vite project named `webapp` using the React and TypeScript template.                                                                                 │
 │     8                                                                                                                                                                          │
 │     9 ```bash                                                                                                                                                                  │
 │    10 npm create vite@latest webapp -- --template react-ts                                                                                                                     │
 │    11 ```                                                                                                                                                                      │
 │    12                                                                                                                                                                          │
 │    13 Navigate into the new directory:                                                                                                                                         │
 │    14                                                                                                                                                                          │
 │    15 ```bash                                                                                                                                                                  │
 │    16 cd webapp                                                                                                                                                                │
 │    17 ```                                                                                                                                                                      │
 │    18                                                                                                                                                                          │
 │    19 ## 2. Install Dependencies                                                                                                                                               │
 │    20                                                                                                                                                                          │
 │    21 Install the necessary dependencies for styling with Tailwind CSS and for making GraphQL requests with Apollo Client.                                                     │
 │    22                                                                                                                                                                          │
 │    23 ```bash                                                                                                                                                                  │
 │    24 npm install tailwindcss postcss autoprefixer                                                                                                                             │
 │    25 npx tailwindcss init -p                                                                                                                                                  │
 │    26 npm install @apollo/client graphql                                                                                                                                       │
 │    27 ```                                                                                                                                                                      │
 │    28                                                                                                                                                                          │
 │    29 ## 3. Configure Tailwind CSS                                                                                                                                             │
 │    30                                                                                                                                                                          │
 │    31 Configure Tailwind CSS by updating `tailwind.config.js` and `src/index.css`.                                                                                             │
 │    32                                                                                                                                                                          │
 │    33 **`tailwind.config.js`:**                                                                                                                                                │
 │    34 Replace the empty `content` array with this:                                                                                                                             │
 │    35 ```javascript                                                                                                                                                            │
 │    36 content: [                                                                                                                                                               │
 │    37   "./index.html",                                                                                                                                                        │
 │    38   "./src/**/*.{js,ts,jsx,tsx}",                                                                                                                                          │
 │    39 ],                                                                                                                                                                       │
 │    40 ```                                                                                                                                                                      │
 │    41                                                                                                                                                                          │
 │    42 **`src/index.css`:**                                                                                                                                                     │
 │    43 Replace the entire file content with the Tailwind CSS directives:                                                                                                        │
 │    44 ```css                                                                                                                                                                   │
 │    45 @tailwind base;                                                                                                                                                          │
 │    46 @tailwind components;                                                                                                                                                    │
 │    47 @tailwind utilities;                                                                                                                                                     │
 │    48 ```                                                                                                                                                                      │
 │    49                                                                                                                                                                          │
 │    50 ## 4. Clean Up Boilerplate                                                                                                                                               │
 │    51                                                                                                                                                                          │
 │    52 Remove the boilerplate code from the default Vite template to create a clean slate.                                                                                      │
 │    53                                                                                                                                                                          │
 │    54 **`src/App.tsx`:**                                                                                                                                                       │
 │    55 Replace the entire file content with a simple, empty component:                                                                                                          │
 │    56 ```tsx                                                                                                                                                                   │
 │    57 function App() {                                                                                                                                                         │
 │    58   return (                                                                                                                                                               │
 │    59     <div>                                                                                                                                                                │
 │    60       {/* App content will go here */}                                                                                                                                   │
 │    61     </div>                                                                                                                                                               │
 │    62   )                                                                                                                                                                      │
 │    63 }                                                                                                                                                                        │
 │    64                                                                                                                                                                          │
 │    65 export default App                                                                                                                                                       │
 │    66 ```                                                                                                                                                                      │
 │    67                                                                                                                                                                          │
 │    68 **`src/App.css`:**                                                                                                                                                       │
 │    69 Delete this file.                                                                                                                                                        │
 │    70                                                                                                                                                                          │
 │    71 **`src/assets/react.svg`:**                                                                                                                                              │
 │    72 Delete this file.                                                                                                                                                        │
 │    73                                                                                                                                                                          │
 │    74 ## 5. Verification                                                                                                                                                       │
 │    75                                                                                                                                                                          │
 │    76 After completing these steps, run the development server:                                                                                                                │
 │    77                                                                                                                                                                          │
 │    78 ```bash                                                                                                                                                                  │
 │    79 npm run dev                                                                                                                                                              │
 │    80 ```                                                                                                                                                                      │
 │    81                                                                                                                                                                          │
 │    82 Open your browser to the specified local address. You should see a completely blank white page. Verify that there are no errors in the browser's developer               │
 │       console. This confirms that the project is set up correctly and all dependencies are in place.                                                                           │
 ╰────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
✦ I will now create the second prompt file.
 ╭────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
 │ ✔  WriteFile Writing to 02-feat(webapp)-...login-page-UI.md                                                                                                                    │
 │                                                                                                                                                                                │
 │     1 You are an expert software engineer. Building on the previous step, your task is to create the static user interface for the login page of the web                       │
 │       application.                                                                                                                                                             │
 │     2                                                                                                                                                                          │
 │     3 **Commit Title:** `feat(webapp): create static login page UI`                                                                                                            │
 │     4                                                                                                                                                                          │
 │     5 ## 1. Create the Login Page Component                                                                                                                                    │
 │     6                                                                                                                                                                          │
 │     7 Create a new directory `src/pages` and a new file `src/pages/LoginPage.tsx`. This component will contain the login form.                                                 │
 │     8                                                                                                                                                                          │
 │     9 **`src/pages/LoginPage.tsx`:**                                                                                                                                           │
 │    10 ```tsx                                                                                                                                                                   │
 │    11 import React from 'react';                                                                                                                                               │
 │    12                                                                                                                                                                          │
 │    13 const LoginPage = () => {                                                                                                                                                │
 │    14   return (                                                                                                                                                               │
 │    15     <div className="min-h-screen bg-gray-100 flex items-center justify-center">                                                                                          │
 │    16       <div className="bg-white p-8 rounded-lg shadow-md w-full max-w-md">                                                                                                │
 │    17         <h1 className="text-2xl font-bold mb-6 text-center">Login</h1>                                                                                                   │
 │    18                                                                                                                                                                          │
 │    19         {/* This div will be used for success/failure messages */}                                                                                                       │
 │    20         <div className="mb-4"></div>                                                                                                                                     │
 │    21                                                                                                                                                                          │
 │    22         <form>                                                                                                                                                           │
 │    23           <div className="mb-4">                                                                                                                                         │
 │    24             <label className="block text-gray-700 text-sm font-bold mb-2" htmlFor="username">                                                                            │
 │    25               Username                                                                                                                                                   │
 │    26             </label>                                                                                                                                                     │
 │    27             <input                                                                                                                                                       │
 │    28               className="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"                     │
 │    29               id="username"                                                                                                                                              │
 │    30               type="text"                                                                                                                                                │
 │    31               placeholder="Username"                                                                                                                                     │
 │    32             />                                                                                                                                                           │
 │    33           </div>                                                                                                                                                         │
 │    34           <div className="mb-6">                                                                                                                                         │
 │    35             <label className="block text-gray-700 text-sm font-bold mb-2" htmlFor="password">                                                                            │
 │    36               Password                                                                                                                                                   │
 │    37             </label>                                                                                                                                                     │
 │    38             <input                                                                                                                                                       │
 │    39               className="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline"                │
 │    40               id="password"                                                                                                                                              │
 │    41               type="password"                                                                                                                                            │
 │    42               placeholder="******************"                                                                                                                           │
 │    43             />                                                                                                                                                           │
 │    44           </div>                                                                                                                                                         │
 │    45           <div className="flex items-center justify-between">                                                                                                            │
 │    46             <button                                                                                                                                                      │
 │    47               className="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline"                                   │
 │    48               type="button"                                                                                                                                              │
 │    49             >                                                                                                                                                            │
 │    50               Sign In                                                                                                                                                    │
 │    51             </button>                                                                                                                                                    │
 │    52           </div>                                                                                                                                                         │
 │    53         </form>                                                                                                                                                          │
 │    54       </div>                                                                                                                                                             │
 │    55     </div>                                                                                                                                                               │
 │    56   );                                                                                                                                                                     │
 │    57 };                                                                                                                                                                       │
 │    58                                                                                                                                                                          │
 │    59 export default LoginPage;                                                                                                                                                │
 │    60 ```                                                                                                                                                                      │
 │    61                                                                                                                                                                          │
 │    62 ## 2. Render the Login Page                                                                                                                                              │
 │    63                                                                                                                                                                          │
 │    64 Update `src/App.tsx` to render the newly created `LoginPage`.                                                                                                            │
 │    65                                                                                                                                                                          │
 │    66 **`src/App.tsx`:**                                                                                                                                                       │
 │    67 ```tsx                                                                                                                                                                   │
 │    68 import LoginPage from './pages/LoginPage';                                                                                                                               │
 │    69                                                                                                                                                                          │
 │    70 function App() {                                                                                                                                                         │
 │    71   return (                                                                                                                                                               │
 │    72     <LoginPage />                                                                                                                                                        │
 │    73   );                                                                                                                                                                     │
 │    74 }                                                                                                                                                                        │
 │    75                                                                                                                                                                          │
 │    76 export default App;                                                                                                                                                      │
 │    77 ```                                                                                                                                                                      │
 │    78                                                                                                                                                                          │
 │    79 ## 3. Verification                                                                                                                                                       │
 │    80                                                                                                                                                                          │
 │    81 Run the development server (`npm run dev`). The browser should now display a centered login form with "Username" and "Password" fields and a "Sign In"                   │
 │       button. The styling should be applied correctly via Tailwind CSS.                                                                                                        │
 ╰────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
✦ I will now create the third prompt file.
 ╭────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
 │ ✔  WriteFile Writing to 03-feat(webapp)-...apollo-client.md                                                                                                                    │
 │                                                                                                                                                                                │
 │     1 You are an expert software engineer. Your next task is to configure the Apollo Client to handle communication with the GraphQL backend.                                  │
 │     2                                                                                                                                                                          │
 │     3 **Commit Title:** `feat(webapp): configure basic apollo client`                                                                                                          │
 │     4                                                                                                                                                                          │
 │     5 ## 1. Create the Apollo Client Instance                                                                                                                                  │
 │     6                                                                                                                                                                          │
 │     7 Create a new directory `src/api` and a new file `src/api/apollo.ts` to house the Apollo Client configuration.                                                            │
 │     8                                                                                                                                                                          │
 │     9 **`src/api/apollo.ts`:**                                                                                                                                                 │
 │    10 ```ts                                                                                                                                                                    │
 │    11 import { ApolloClient, InMemoryCache, createHttpLink } from '@apollo/client';                                                                                            │
 │    12                                                                                                                                                                          │
 │    13 const httpLink = createHttpLink({                                                                                                                                        │
 │    14   uri: '/graphql',                                                                                                                                                       │
 │    15 });                                                                                                                                                                      │
 │    16                                                                                                                                                                          │
 │    17 const client = new ApolloClient({                                                                                                                                        │
 │    18   link: httpLink,                                                                                                                                                        │
 │    19   cache: new InMemoryCache(),                                                                                                                                            │
 │    20 });                                                                                                                                                                      │
 │    21                                                                                                                                                                          │
 │    22 export default client;                                                                                                                                                   │
 │    23 ```                                                                                                                                                                      │
 │    24                                                                                                                                                                          │
 │    25 ## 2. Provide the Client to the Application                                                                                                                              │
 │    26                                                                                                                                                                          │
 │    27 To make the Apollo Client instance available to the entire component tree, you need to wrap the root component with the `ApolloProvider`.                                │
 │    28                                                                                                                                                                          │
 │    29 Update `src/main.tsx` to import the client and the provider.                                                                                                             │
 │    30                                                                                                                                                                          │
 │    31 **`src/main.tsx`:**                                                                                                                                                      │
 │    32 ```tsx                                                                                                                                                                   │
 │    33 import React from 'react'                                                                                                                                                │
 │    34 import ReactDOM from 'react-dom/client'                                                                                                                                  │
 │    35 import { ApolloProvider } from '@apollo/client'                                                                                                                          │
 │    36 import App from './App.tsx'                                                                                                                                              │
 │    37 import './index.css'                                                                                                                                                     │
 │    38 import client from './api/apollo.ts'                                                                                                                                     │
 │    39                                                                                                                                                                          │
 │    40 ReactDOM.createRoot(document.getElementById('root')!).render(                                                                                                            │
 │    41   <React.StrictMode>                                                                                                                                                     │
 │    42     <ApolloProvider client={client}>                                                                                                                                     │
 │    43       <App />                                                                                                                                                            │
 │    44     </ApolloProvider>                                                                                                                                                    │
 │    45   </React.StrictMode>,                                                                                                                                                   │
 │    46 )                                                                                                                                                                        │
 │    47 ```                                                                                                                                                                      │
 │    48                                                                                                                                                                          │
 │    49 ## 3. Verification                                                                                                                                                       │
 │    50                                                                                                                                                                          │
 │    51 Run the development server (`npm run dev`). There should be no visible changes to the application. The login form should still be displayed as before.                   │
 │    52                                                                                                                                                                          │
 │    53 Check the browser's developer console to ensure there are no new errors. This confirms that the Apollo Client has been initialized and provided to the                   │
 │       application correctly.                                                                                                                                                   │
 ╰────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
✦ I will now create the fourth prompt file.
 ╭────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
 │ ✔  WriteFile Writing to 04-feat(webapp)-...ogin-mutation.md                                                                                                                    │
 │                                                                                                                                                                                │
 │      1 You are an expert software engineer. Your task is to implement the login functionality by connecting the UI to the GraphQL API using the `useMutation` hook.            │
 │      2                                                                                                                                                                         │
 │      3 **Commit Title:** `feat(webapp): implement login mutation`                                                                                                              │
 │      4                                                                                                                                                                         │
 │      5 ## 1. Define the GraphQL Mutation                                                                                                                                       │
 │      6                                                                                                                                                                         │
 │      7 Create a new directory `src/graphql` and a file `src/graphql/mutations.ts` to store the `login` mutation.                                                               │
 │      8                                                                                                                                                                         │
 │      9 **`src/graphql/mutations.ts`:**                                                                                                                                         │
 │     10 ```ts                                                                                                                                                                   │
 │     11 import { gql } from '@apollo/client';                                                                                                                                   │
 │     12                                                                                                                                                                         │
 │     13 export const LOGIN_MUTATION = gql`                                                                                                                                      │
 │     14   mutation Login($username: String!, $password: String!) {                                                                                                              │
 │     15     login(input: { username: $username, password: $password }) {                                                                                                        │
 │     16       success                                                                                                                                                           │
 │     17       token                                                                                                                                                             │
 │     18       refreshToken                                                                                                                                                      │
 │     19       errors                                                                                                                                                            │
 │     20     }                                                                                                                                                                   │
 │     21   }                                                                                                                                                                     │
 │     22 `;                                                                                                                                                                      │
 │     23 ```                                                                                                                                                                     │
 │     24                                                                                                                                                                         │
 │     25 ## 2. Update the Login Page to Handle State and Mutations                                                                                                               │
 │     26                                                                                                                                                                         │
 │     27 Modify `src/pages/LoginPage.tsx` to make it a stateful, controlled component that uses the `useMutation` hook to perform the login.                                     │
 │     28                                                                                                                                                                         │
 │     29 **`src/pages/LoginPage.tsx`:**                                                                                                                                          │
 │     30 ```tsx                                                                                                                                                                  │
 │     31 import React, { useState } from 'react';                                                                                                                                │
 │     32 import { useMutation } from '@apollo/client';                                                                                                                           │
 │     33 import { LOGIN_MUTATION } from '../graphql/mutations';                                                                                                                  │
 │     34                                                                                                                                                                         │
 │     35 interface MessageState {                                                                                                                                                │
 │     36   text: string;                                                                                                                                                         │
 │     37   type: 'success' | 'error' | '';                                                                                                                                       │
 │     38 }                                                                                                                                                                       │
 │     39                                                                                                                                                                         │
 │     40 const LoginPage = () => {                                                                                                                                               │
 │     41   const [username, setUsername] = useState('');                                                                                                                         │
 │     42   const [password, setPassword] = useState('');                                                                                                                         │
 │     43   const [message, setMessage] = useState<MessageState>({ text: '', type: '' });                                                                                         │
 │     44                                                                                                                                                                         │
 │     45   const [login, { loading }] = useMutation(LOGIN_MUTATION, {                                                                                                            │
 │     46     onCompleted: (data) => {                                                                                                                                            │
 │     47       if (data.login.success) {                                                                                                                                         │
 │     48         setMessage({ text: 'Login successful!', type: 'success' });                                                                                                     │
 │     49         // Token handling will be added in a future step                                                                                                                │
 │     50       } else {                                                                                                                                                          │
 │     51         const errorMessage = data.login.errors?.join(', ') || 'An unknown error occurred.';                                                                             │
 │     52         setMessage({ text: `Login failed: ${errorMessage}`, type: 'error' });                                                                                           │
 │     53       }                                                                                                                                                                 │
 │     54     },                                                                                                                                                                  │
 │     55     onError: (error) => {                                                                                                                                               │
 │     56       setMessage({ text: `An error occurred: ${error.message}`, type: 'error' });                                                                                       │
 │     57     },                                                                                                                                                                  │
 │     58   });                                                                                                                                                                   │
 │     59                                                                                                                                                                         │
 │     60   const handleSubmit = (event: React.FormEvent) => {                                                                                                                    │
 │     61     event.preventDefault();                                                                                                                                             │
 │     62     setMessage({ text: '', type: '' });                                                                                                                                 │
 │     63     login({ variables: { username, password } });                                                                                                                       │
 │     64   };                                                                                                                                                                    │
 │     65                                                                                                                                                                         │
 │     66   return (                                                                                                                                                              │
 │     67     <div className="min-h-screen bg-gray-100 flex items-center justify-center">                                                                                         │
 │     68       <div className="bg-white p-8 rounded-lg shadow-md w-full max-w-md">                                                                                               │
 │     69         <h1 className="text-2xl font-bold mb-6 text-center">Login</h1>                                                                                                  │
 │     70                                                                                                                                                                         │
 │     71         {message.text && (                                                                                                                                              │
 │     72           <div                                                                                                                                                          │
 │     73             className={`mb-4 p-4 rounded ${                                                                                                                             │
 │     74               message.type === 'success' ? 'bg-green-100 text-green-700' : 'bg-red-100 text-red-700'                                                                    │
 │     75             }`}                                                                                                                                                         │
 │     76           >                                                                                                                                                             │
 │     77             {message.text}                                                                                                                                              │
 │     78           </div>                                                                                                                                                        │
 │     79         )}                                                                                                                                                              │
 │     80                                                                                                                                                                         │
 │     81         <form onSubmit={handleSubmit}>                                                                                                                                  │
 │     82           <div className="mb-4">                                                                                                                                        │
 │     83             <label className="block text-gray-700 text-sm font-bold mb-2" htmlFor="username">                                                                           │
 │     84               Username                                                                                                                                                  │
 │     85             </label>                                                                                                                                                    │
 │     86             <input                                                                                                                                                      │
 │     87               className="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"                    │
 │     88               id="username"                                                                                                                                             │
 │     89               type="text"                                                                                                                                               │
 │     90               placeholder="Username"                                                                                                                                    │
 │     91               value={username}                                                                                                                                          │
 │     92               onChange={(e) => setUsername(e.target.value)}                                                                                                             │
 │     93             />                                                                                                                                                          │
 │     94           </div>                                                                                                                                                        │
 │     95           <div className="mb-6">                                                                                                                                        │
 │     96             <label className="block text-gray-700 text-sm font-bold mb-2" htmlFor="password">                                                                           │
 │     97               Password                                                                                                                                                  │
 │     98             </label>                                                                                                                                                    │
 │     99             <input                                                                                                                                                      │
 │    100               className="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline"               │
 │    101               id="password"                                                                                                                                             │
 │    102               type="password"                                                                                                                                           │
 │    103               placeholder="******************"                                                                                                                          │
 │    104               value={password}                                                                                                                                          │
 │    105               onChange={(e) => setPassword(e.target.value)}                                                                                                             │
 │    106             />                                                                                                                                                          │
 │    107           </div>                                                                                                                                                        │
 │    108           <div className="flex items-center justify-between">                                                                                                           │
 │    109             <button                                                                                                                                                     │
 │    110               className="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline disabled:bg-blue-300"             │
 │    111               type="submit"                                                                                                                                             │
 │    112               disabled={loading}                                                                                                                                        │
 │    113             >                                                                                                                                                           │
 │    114               {loading ? 'Signing In...' : 'Sign In'}                                                                                                                   │
 │    115             </button>                                                                                                                                                   │
 │    116           </div>                                                                                                                                                        │
 │    117         </form>                                                                                                                                                         │
 │    118       </div>                                                                                                                                                            │
 │    119     </div>                                                                                                                                                              │
 │    120   );                                                                                                                                                                    │
 │    121 };                                                                                                                                                                      │
 │    122                                                                                                                                                                         │
 │    123 export default LoginPage;                                                                                                                                               │
 │    124 ```                                                                                                                                                                     │
 │    125                                                                                                                                                                         │
 │    126 ## 3. Verification                                                                                                                                                      │
 │    127                                                                                                                                                                         │
 │    128 To verify this step, you will need to manually test the login functionality.                                                                                            │
 │    129                                                                                                                                                                         │
 │    130 1.  Run the application (`npm run dev`).                                                                                                                                │
 │    131 2.  **Test Failure**: Enter incorrect credentials and click "Sign In". The form should display a red error message, like "Login failed: Invalid                         │
 │        credentials".                                                                                                                                                           │
 │    132 3.  **Test Success**: Enter correct credentials (you may need to add a user to the database manually as per `AUTH.md`). Click "Sign In". The form should                │
 │        display a green success message: "Login successful!".                                                                                                                   │
 │    133 4.  **Test Loading State**: While the mutation is in progress, the "Sign In" button should be disabled and its text should change to "Signing In...". You               │
 │        can simulate a slow network connection in your browser's developer tools to see this more clearly.                                                                      │
 ╰────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
✦ I will now create the fifth prompt file.
 ╭────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
 │ ✔  WriteFile Writing to 05-feat(webapp)-...token-storage.md                                                                                                                    │
 │                                                                                                                                                                                │
 │      1 You are an expert software engineer. Your task is to create an authentication context to manage user state and persist tokens to `localStorage`.                        │
 │      2                                                                                                                                                                         │
 │      3 **Commit Title:** `feat(webapp): implement AuthContext and token storage`                                                                                               │
 │      4                                                                                                                                                                         │
 │      5 ## 1. Create the AuthContext                                                                                                                                            │
 │      6                                                                                                                                                                         │
 │      7 Create a new directory `src/contexts` and a file `src/contexts/AuthContext.tsx`. This context will provide authentication state and functions to the entire             │
 │        application.                                                                                                                                                            │
 │      8                                                                                                                                                                         │
 │      9 **`src/contexts/AuthContext.tsx`:**                                                                                                                                     │
 │     10 ```tsx                                                                                                                                                                  │
 │     11 import React, { createContext, useState, useContext, ReactNode } from 'react';                                                                                          │
 │     12                                                                                                                                                                         │
 │     13 interface AuthContextType {                                                                                                                                             │
 │     14   token: string | null;                                                                                                                                                 │
 │     15   saveTokens: (newToken: string, newRefreshToken: string) => void;                                                                                                      │
 │     16   logout: () => void;                                                                                                                                                   │
 │     17 }                                                                                                                                                                       │
 │     18                                                                                                                                                                         │
 │     19 const AuthContext = createContext<AuthContextType | null>(null);                                                                                                        │
 │     20                                                                                                                                                                         │
 │     21 export const AuthProvider = ({ children }: { children: ReactNode }) => {                                                                                                │
 │     22   const [token, setToken] = useState<string | null>(() => localStorage.getItem('token'));                                                                               │
 │     23                                                                                                                                                                         │
 │     24   const saveTokens = (newToken: string, newRefreshToken: string) => {                                                                                                   │
 │     25     localStorage.setItem('token', newToken);                                                                                                                            │
 │     26     localStorage.setItem('refreshToken', newRefreshToken);                                                                                                              │
 │     27     setToken(newToken);                                                                                                                                                 │
 │     28   };                                                                                                                                                                    │
 │     29                                                                                                                                                                         │
 │     30   const logout = () => {                                                                                                                                                │
 │     31     localStorage.removeItem('token');                                                                                                                                   │
 │     32     localStorage.removeItem('refreshToken');                                                                                                                            │
 │     33     setToken(null);                                                                                                                                                     │
 │     34     // In a real app, you'd also want to clear the Apollo Client cache here.                                                                                            │
 │     35     // We will add this in a later step.                                                                                                                                │
 │     36   };                                                                                                                                                                    │
 │     37                                                                                                                                                                         │
 │     38   const authContextValue = {                                                                                                                                            │
 │     39     token,                                                                                                                                                              │
 │     40     saveTokens,                                                                                                                                                         │
 │     41     logout,                                                                                                                                                             │
 │     42   };                                                                                                                                                                    │
 │     43                                                                                                                                                                         │
 │     44   return (                                                                                                                                                              │
 │     45     <AuthContext.Provider value={authContextValue}>                                                                                                                     │
 │     46       {children}                                                                                                                                                        │
 │     47     </AuthContext.Provider>                                                                                                                                             │
 │     48   );                                                                                                                                                                    │
 │     49 };                                                                                                                                                                      │
 │     50                                                                                                                                                                         │
 │     51 export const useAuth = () => {                                                                                                                                          │
 │     52   const context = useContext(AuthContext);                                                                                                                              │
 │     53   if (!context) {                                                                                                                                                       │
 │     54     throw new Error('useAuth must be used within an AuthProvider');                                                                                                     │
 │     55   }                                                                                                                                                                     │
 │     56   return context;                                                                                                                                                       │
 │     57 };                                                                                                                                                                      │
 │     58 ```                                                                                                                                                                     │
 │     59                                                                                                                                                                         │
 │     60 ## 2. Provide the AuthContext to the Application                                                                                                                        │
 │     61                                                                                                                                                                         │
 │     62 Wrap the `ApolloProvider` with the new `AuthProvider` in `src/main.tsx` to make the context available everywhere.                                                       │
 │     63                                                                                                                                                                         │
 │     64 **`src/main.tsx`:**                                                                                                                                                     │
 │     65 ```tsx                                                                                                                                                                  │
 │     66 import React from 'react'                                                                                                                                               │
 │     67 import ReactDOM from 'react-dom/client'                                                                                                                                 │
 │     68 import { ApolloProvider } from '@apollo/client'                                                                                                                         │
 │     69 import { AuthProvider } from './contexts/AuthContext'                                                                                                                   │
 │     70 import App from './App.tsx'                                                                                                                                             │
 │     71 import './index.css'                                                                                                                                                    │
 │     72 import client from './api/apollo.ts'                                                                                                                                    │
 │     73                                                                                                                                                                         │
 │     74 ReactDOM.createRoot(document.getElementById('root')!).render(                                                                                                           │
 │     75   <React.StrictMode>                                                                                                                                                    │
 │     76     <AuthProvider>                                                                                                                                                      │
 │     77       <ApolloProvider client={client}>                                                                                                                                  │
 │     78         <App />                                                                                                                                                         │
 │     79       </ApolloProvider>                                                                                                                                                 │
 │     80     </AuthProvider>                                                                                                                                                     │
 │     81   </React.StrictMode>,                                                                                                                                                  │
 │     82 )                                                                                                                                                                       │
 │     83 ```                                                                                                                                                                     │
 │     84                                                                                                                                                                         │
 │     85 ## 3. Integrate AuthContext with the Login Page                                                                                                                         │
 │     86                                                                                                                                                                         │
 │     87 Update `src/pages/LoginPage.tsx` to use the `useAuth` hook and save the tokens upon a successful login.                                                                 │
 │     88                                                                                                                                                                         │
 │     89 **`src/pages/LoginPage.tsx` (partial changes):**                                                                                                                        │
 │     90 First, add the `useAuth` import:                                                                                                                                        │
 │     91 ```tsx                                                                                                                                                                  │
 │     92 import { useAuth } from '../contexts/AuthContext';                                                                                                                      │
 │     93 ```                                                                                                                                                                     │
 │     94                                                                                                                                                                         │
 │     95 Next, get the `saveTokens` function from the context:                                                                                                                   │
 │     96 ```tsx                                                                                                                                                                  │
 │     97 // inside the LoginPage component                                                                                                                                       │
 │     98 const { saveTokens } = useAuth();                                                                                                                                       │
 │     99 ```                                                                                                                                                                     │
 │    100                                                                                                                                                                         │
 │    101 Finally, update the `onCompleted` handler for the mutation to call `saveTokens`:                                                                                        │
 │    102 ```tsx                                                                                                                                                                  │
 │    103 // inside the useMutation hook options                                                                                                                                  │
 │    104 onCompleted: (data) => {                                                                                                                                                │
 │    105   if (data.login.success) {                                                                                                                                             │
 │    106     setMessage({ text: 'Login successful!', type: 'success' });                                                                                                         │
 │    107     saveTokens(data.login.token, data.login.refreshToken);                                                                                                              │
 │    108   } else {                                                                                                                                                              │
 │    109     // ... same as before                                                                                                                                               │
 │    110   }                                                                                                                                                                     │
 │    111 },                                                                                                                                                                      │
 │    112 ```                                                                                                                                                                     │
 │    113                                                                                                                                                                         │
 │    114 ## 4. Verification                                                                                                                                                      │
 │    115                                                                                                                                                                         │
 │    116 1.  Run the application (`npm run dev`).                                                                                                                                │
 │    117 2.  Perform a successful login.                                                                                                                                         │
 │    118 3.  Open your browser's developer tools and inspect the `localStorage`.                                                                                                 │
 │    119 4.  You should see two keys, `token` and `refreshToken`, populated with the values received from the API.                                                               │
 │    120 5.  Refresh the page. The application state should be maintained (though there's no visible change yet, the token will be loaded from `localStorage` into               │
 │        the context).                                                                                                                                                           │
 ╰────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
✦ I will now create the sixth prompt file.
 ╭────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
 │ ✔  WriteFile Writing to 06-feat(webapp)-...basic-routing.md                                                                                                                    │
 │                                                                                                                                                                                │
 │      1 You are an expert software engineer. Your task is to add the authentication token to the headers of all GraphQL requests and create a simple authenticated              │
 │        view.                                                                                                                                                                   │
 │      2                                                                                                                                                                         │
 │      3 **Commit Title:** `feat(webapp): implement authenticated apollo link and basic routing`                                                                                 │
 │      4                                                                                                                                                                         │
 │      5 ## 1. Create a Home Page for Authenticated Users                                                                                                                        │
 │      6                                                                                                                                                                         │
 │      7 Create a new page at `src/pages/HomePage.tsx` that will be shown only to logged-in users. This page will perform a simple query to fetch the current user's             │
 │        data.                                                                                                                                                                   │
 │      8                                                                                                                                                                         │
 │      9 **`src/graphql/queries.ts`:**                                                                                                                                           │
 │     10 Create a new file for queries.                                                                                                                                          │
 │     11 ```ts                                                                                                                                                                   │
 │     12 import { gql } from '@apollo/client';                                                                                                                                   │
 │     13                                                                                                                                                                         │
 │     14 export const ME_QUERY = gql`                                                                                                                                            │
 │     15   query Me {                                                                                                                                                            │
 │     16     me {                                                                                                                                                                │
 │     17       username                                                                                                                                                          │
 │     18       firstName                                                                                                                                                         │
 │     19     }                                                                                                                                                                   │
 │     20   }                                                                                                                                                                     │
 │     21 `;                                                                                                                                                                      │
 │     22 ```                                                                                                                                                                     │
 │     23                                                                                                                                                                         │
 │     24 **`src/pages/HomePage.tsx`:**                                                                                                                                           │
 │     25 ```tsx                                                                                                                                                                  │
 │     26 import React from 'react';                                                                                                                                              │
 │     27 import { useQuery } from '@apollo/client';                                                                                                                              │
 │     28 import { useAuth } from '../contexts/AuthContext';                                                                                                                      │
 │     29 import { ME_QUERY } from '../graphql/queries';                                                                                                                          │
 │     30                                                                                                                                                                         │
 │     31 const HomePage = () => {                                                                                                                                                │
 │     32   const { logout } = useAuth();                                                                                                                                         │
 │     33   const { data, loading, error } = useQuery(ME_QUERY);                                                                                                                  │
 │     34                                                                                                                                                                         │
 │     35   if (loading) return <p>Loading...</p>;                                                                                                                                │
 │     36   if (error) return <p>Error: {error.message}</p>;                                                                                                                      │
 │     37                                                                                                                                                                         │
 │     38   return (                                                                                                                                                              │
 │     39     <div className="min-h-screen bg-gray-100 flex items-center justify-center">                                                                                         │
 │     40       <div className="bg-white p-8 rounded-lg shadow-md w-full max-w-md text-center">                                                                                   │
 │     41         <h1 className="text-2xl font-bold mb-6">Welcome, {data?.me?.firstName || 'User'}!</h1>                                                                          │
 │     42         <p>Your username is: {data?.me?.username}</p>                                                                                                                   │
 │     43         <button                                                                                                                                                         │
 │     44           onClick={logout}                                                                                                                                              │
 │     45           className="mt-6 bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline"                                   │
 │     46         >                                                                                                                                                               │
 │     47           Logout                                                                                                                                                        │
 │     48         </button>                                                                                                                                                       │
 │     49       </div>                                                                                                                                                            │
 │     50     </div>                                                                                                                                                              │
 │     51   );                                                                                                                                                                    │
 │     52 };                                                                                                                                                                      │
 │     53                                                                                                                                                                         │
 │     54 export default HomePage;                                                                                                                                                │
 │     55 ```                                                                                                                                                                     │
 │     56                                                                                                                                                                         │
 │     57 ## 2. Implement the Authenticated Apollo Link                                                                                                                           │
 │     58                                                                                                                                                                         │
 │     59 Update `src/api/apollo.ts` to include an `authLink` that retrieves the token from `localStorage` and adds it to the `Authorization` header of every request.            │
 │     60                                                                                                                                                                         │
 │     61 **`src/api/apollo.ts`:**                                                                                                                                                │
 │     62 ```ts                                                                                                                                                                   │
 │     63 import { ApolloClient, InMemoryCache, createHttpLink } from '@apollo/client';                                                                                           │
 │     64 import { setContext } from '@apollo/client/link/context';                                                                                                               │
 │     65                                                                                                                                                                         │
 │     66 const httpLink = createHttpLink({                                                                                                                                       │
 │     67   uri: '/graphql',                                                                                                                                                      │
 │     68 });                                                                                                                                                                     │
 │     69                                                                                                                                                                         │
 │     70 const authLink = setContext((_, { headers }) => {                                                                                                                       │
 │     71   // get the authentication token from local storage if it exists                                                                                                       │
 │     72   const token = localStorage.getItem('token');                                                                                                                          │
 │     73   // return the headers to the context so httpLink can read them                                                                                                        │
 │     74   return {                                                                                                                                                              │
 │     75     headers: {                                                                                                                                                          │
 │     76       ...headers,                                                                                                                                                       │
 │     77       authorization: token ? `Bearer ${token}` : "",                                                                                                                    │
 │     78     }                                                                                                                                                                   │
 │     79   }                                                                                                                                                                     │
 │     80 });                                                                                                                                                                     │
 │     81                                                                                                                                                                         │
 │     82 const client = new ApolloClient({                                                                                                                                       │
 │     83   link: authLink.concat(httpLink),                                                                                                                                      │
 │     84   cache: new InMemoryCache(),                                                                                                                                           │
 │     85 });                                                                                                                                                                     │
 │     86                                                                                                                                                                         │
 │     87 export default client;                                                                                                                                                  │
 │     88 ```                                                                                                                                                                     │
 │     89                                                                                                                                                                         │
 │     90 ## 3. Implement Basic Routing                                                                                                                                           │
 │     91                                                                                                                                                                         │
 │     92 Update `src/App.tsx` to show the `HomePage` if the user is authenticated (i.e., has a token) and the `LoginPage` otherwise.                                             │
 │     93                                                                                                                                                                         │
 │     94 **`src/App.tsx`:**                                                                                                                                                      │
 │     95 ```tsx                                                                                                                                                                  │
 │     96 import { useAuth } from './contexts/AuthContext';                                                                                                                       │
 │     97 import HomePage from './pages/HomePage';                                                                                                                                │
 │     98 import LoginPage from './pages/LoginPage';                                                                                                                              │
 │     99                                                                                                                                                                         │
 │    100 function App() {                                                                                                                                                        │
 │    101   const { token } = useAuth();                                                                                                                                          │
 │    102                                                                                                                                                                         │
 │    103   return token ? <HomePage /> : <LoginPage />;                                                                                                                          │
 │    104 }                                                                                                                                                                       │
 │    105                                                                                                                                                                         │
 │    106 export default App;                                                                                                                                                     │
 │    107 ```                                                                                                                                                                     │
 │    108                                                                                                                                                                         │
 │    109 ## 4. Verification                                                                                                                                                      │
 │    110                                                                                                                                                                         │
 │    111 1.  Run the application (`npm run dev`). You should see the `LoginPage`.                                                                                                │
 │    112 2.  Log in with correct credentials.                                                                                                                                    │
 │    113 3.  Upon successful login, you should be redirected to the `HomePage`. The page should display a welcome message with your first name.                                  │
 │    114 4.  Open the browser's network inspector. You should see a GraphQL request for the `me` query, and its request headers should include the `Authorization:               │
 │        Bearer <token>` header.                                                                                                                                                 │
 │    115 5.  Click the "Logout" button. You should be returned to the `LoginPage`.                                                                                               │
 │    116 6.  Refresh the page while logged in. You should remain on the `HomePage`, demonstrating that the token is being correctly read from `localStorage` on                  │
 │        initial load.                                                                                                                                                           │
 ╰────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
✦ I will now create the seventh prompt file.
 ╭────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
 │ ✔  WriteFile Writing to 07-feat(webapp)-...-refresh-link.md                                                                                                                    │
 │                                                                                                                                                                                │
 │    ... first 63 lines hidden ...                                                                                                                                               │
 │     64   if (!isRefreshing) {                                                                                                                                                  │
 │     65     return null;                                                                                                                                                        │
 │     66   }                                                                                                                                                                     │
 │     67                                                                                                                                                                         │
 │     68   return (                                                                                                                                                              │
 │     69     <div className="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center">                                                                        │
 │     70       <div className="bg-white p-6 rounded-lg shadow-xl">                                                                                                               │
 │     71         <p className="text-lg font-semibold">Refreshing session...</p>                                                                                                  │
 │     72       </div>                                                                                                                                                            │
 │     73     </div>                                                                                                                                                              │
 │     74   );                                                                                                                                                                    │
 │     75 };                                                                                                                                                                      │
 │     76                                                                                                                                                                         │
 │     77 export default GlobalLoading;                                                                                                                                           │
 │     78 ```                                                                                                                                                                     │
 │     79                                                                                                                                                                         │
 │     80 **`src/App.tsx`:**                                                                                                                                                      │
 │     81 Render this component in your app.                                                                                                                                      │
 │     82 ```tsx                                                                                                                                                                  │
 │     83 import { useAuth } from './contexts/AuthContext';                                                                                                                       │
 │     84 import HomePage from './pages/HomePage';                                                                                                                                │
 │     85 import LoginPage from './pages/LoginPage';                                                                                                                              │
 │     86 import GlobalLoading from './components/GlobalLoading';                                                                                                                 │
 │     87                                                                                                                                                                         │
 │     88 function App() {                                                                                                                                                        │
 │     89   const { token } = useAuth();                                                                                                                                          │
 │     90                                                                                                                                                                         │
 │     91   return (                                                                                                                                                              │
 │     92     <>                                                                                                                                                                  │
 │     93       <GlobalLoading />                                                                                                                                                 │
 │     94       {token ? <HomePage /> : <LoginPage />}                                                                                                                            │
 │     95     </>                                                                                                                                                                 │
 │     96   );                                                                                                                                                                    │
 │     97 }                                                                                                                                                                       │
 │     98                                                                                                                                                                         │
 │     99 export default App;                                                                                                                                                     │
 │    100 ```                                                                                                                                                                     │
 │    101                                                                                                                                                                         │
 │    102 ## 3. Implement the Token Refresh Link                                                                                                                                  │
 │    103                                                                                                                                                                         │
 │    104 This is the core of the task. Update `src/api/apollo.ts` to handle GraphQL errors, attempt a token refresh, and retry the failed request.                               │
 │    105                                                                                                                                                                         │
 │    106 **`src/graphql/mutations.ts`:**                                                                                                                                         │
 │    107 First, add the `refreshToken` mutation.                                                                                                                                 │
 │    108 ```ts                                                                                                                                                                   │
 │    109 // ... LOGIN_MUTATION                                                                                                                                                   │
 │    110                                                                                                                                                                         │
 │    111 export const REFRESH_TOKEN_MUTATION = gql`                                                                                                                              │
 │    112   mutation RefreshToken($refreshToken: String!) {                                                                                                                       │
 │    113     refreshToken(input: { refreshToken: $refreshToken }) {                                                                                                              │
 │    114       success                                                                                                                                                           │
 │    115       token                                                                                                                                                             │
 │    116       refreshToken                                                                                                                                                      │
 │    117       errors                                                                                                                                                            │
 │    118     }                                                                                                                                                                   │
 │    119   }                                                                                                                                                                     │
 │    120 `;                                                                                                                                                                      │
 │    121 ```                                                                                                                                                                     │
 │    122                                                                                                                                                                         │
 │    123 **`src/api/apollo.ts`:**                                                                                                                                                │
 │    124 This is a significant update. We will use `onError` from `@apollo/client/link/error` to catch errors.                                                                   │
 │    125 ```ts                                                                                                                                                                   │
 │    126 import {                                                                                                                                                                │
 │    127   ApolloClient,                                                                                                                                                         │
 │    128   InMemoryCache,                                                                                                                                                        │
 │    129   createHttpLink,                                                                                                                                                       │
 │    130   from,                                                                                                                                                                 │
 │    131   ApolloLink,                                                                                                                                                           │
 │    132 } from '@apollo/client';                                                                                                                                                │
 │    133 import { setContext } from '@apollo/client/link/context';                                                                                                               │
 │    134 import { onError } from '@apollo/client/link/error';                                                                                                                    │
 │    135 import { REFRESH_TOKEN_MUTATION } from '../graphql/mutations';                                                                                                          │
 │    136                                                                                                                                                                         │
 │    137 // A separate client for the refresh token mutation to avoid link loops                                                                                                 │
 │    138 const refreshClient = new ApolloClient({                                                                                                                                │
 │    139   uri: '/graphql',                                                                                                                                                      │
 │    140   cache: new InMemoryCache(),                                                                                                                                           │
 │    141 });                                                                                                                                                                     │
 │    142                                                                                                                                                                         │
 │    143 const httpLink = createHttpLink({                                                                                                                                       │
 │    144   uri: '/graphql',                                                                                                                                                      │
 │    145 });                                                                                                                                                                     │
 │    146                                                                                                                                                                         │
 │    147 const authLink = setContext((_, { headers }) => {                                                                                                                       │
 │    148   const token = localStorage.getItem('token');                                                                                                                          │
 │    149   return {                                                                                                                                                              │
 │    150     headers: {                                                                                                                                                          │
 │    151       ...headers,                                                                                                                                                       │
 │    152       authorization: token ? `Bearer ${token}` : '',                                                                                                                    │
 │    153     },                                                                                                                                                                  │
 │    154   };                                                                                                                                                                    │
 │    155 });                                                                                                                                                                     │
 │    156                                                                                                                                                                         │
 │    157 const errorLink = (                                                                                                                                                     │
 │    158   setIsRefreshing: (isRefreshing: boolean) => void,                                                                                                                     │
 │    159   logout: () => Promise<void>                                                                                                                                           │
 │    160 ): ApolloLink =>                                                                                                                                                        │
 │    161   onError(({ graphQLErrors, networkError, operation, forward }) => {                                                                                                    │
 │    162     if (graphQLErrors) {                                                                                                                                                │
 │    163       for (let err of graphQLErrors) {                                                                                                                                  │
 │    164         // Check for a specific error message or code that indicates an expired token                                                                                   │
 │    165         if (err.message.includes('Unauthorized')) {                                                                                                                     │
 │    166           const refreshToken = localStorage.getItem('refreshToken');                                                                                                    │
 │    167           if (!refreshToken) {                                                                                                                                          │
 │    168             logout();                                                                                                                                                   │
 │    169             return;                                                                                                                                                     │
 │    170           }                                                                                                                                                             │
 │    171                                                                                                                                                                         │
 │    172           setIsRefreshing(true);                                                                                                                                        │
 │    173                                                                                                                                                                         │
 │    174           refreshClient                                                                                                                                                 │
 │    175             .mutate({                                                                                                                                                   │
 │    176               mutation: REFRESH_TOKEN_MUTATION,                                                                                                                         │
 │    177               variables: { refreshToken },                                                                                                                              │
 │    178             })                                                                                                                                                          │
 │    179             .then(({ data }) => {                                                                                                                                       │
 │    180               const newTokens = data?.refreshToken;                                                                                                                     │
 │    181               if (newTokens?.success) {                                                                                                                                 │
 │    182                 localStorage.setItem('token', newTokens.token);                                                                                                         │
 │    183                 localStorage.setItem('refreshToken', newTokens.refreshToken);                                                                                           │
 │    184                                                                                                                                                                         │
 │    185                 // Retry the failed request with the new token                                                                                                          │
 │    186                 const oldHeaders = operation.getContext().headers;                                                                                                      │
 │    187                 operation.setContext({                                                                                                                                  │
 │    188                   headers: {                                                                                                                                            │
 │    189                     ...oldHeaders,                                                                                                                                      │
 │    190                     authorization: `Bearer ${newTokens.token}`,                                                                                                         │
 │    191                   },                                                                                                                                                    │
 │    192                 });                                                                                                                                                     │
 │    193                 return forward(operation);                                                                                                                              │
 │    194               } else {                                                                                                                                                  │
 │    195                 logout();                                                                                                                                               │
 │    196               }                                                                                                                                                         │
 │    197             })                                                                                                                                                          │
 │    198             .catch(() => {                                                                                                                                              │
 │    199               logout();                                                                                                                                                 │
 │    200             })                                                                                                                                                          │
 │    201             .finally(() => {                                                                                                                                            │
 │    202               setIsRefreshing(false);                                                                                                                                   │
 │    203             });                                                                                                                                                         │
 │    204         }                                                                                                                                                               │
 │    205       }                                                                                                                                                                 │
 │    206     }                                                                                                                                                                   │
 │    207                                                                                                                                                                         │
 │    208     if (networkError) console.log(`[Network error]: ${networkError}`);                                                                                                  │
 │    209   });                                                                                                                                                                   │
 │    210                                                                                                                                                                         │
 │    211 // The main client factory                                                                                                                                              │
 │    212 export const createApolloClient = (                                                                                                                                     │
 │    213   setIsRefreshing: (isRefreshing: boolean) => void,                                                                                                                     │
 │    214   baseLogout: () => void                                                                                                                                                │
 │    215 ) => {                                                                                                                                                                  │
 │    216   const logout = async () => {                                                                                                                                          │
 │    217     baseLogout();                                                                                                                                                       │
 │    218     await client.clearStore();                                                                                                                                          │
 │    219   };                                                                                                                                                                    │
 │    220                                                                                                                                                                         │
 │    221   const client = new ApolloClient({                                                                                                                                     │
 │    222     link: from([errorLink(setIsRefreshing, logout), authLink, httpLink]),                                                                                               │
 │    223     cache: new InMemoryCache(),                                                                                                                                         │
 │    224   });                                                                                                                                                                   │
 │    225                                                                                                                                                                         │
 │    226   return client;                                                                                                                                                        │
 │    227 };                                                                                                                                                                      │
 │    228 ```                                                                                                                                                                     │
 │    229                                                                                                                                                                         │
 │    230 ## 4. Update Application Entrypoint                                                                                                                                     │
 │    231                                                                                                                                                                         │
 │    232 We now need to pass the context functions to our client factory.                                                                                                        │
 │    233                                                                                                                                                                         │
 │    234 **`src/main.tsx`:**                                                                                                                                                     │
 │    235 This needs to be refactored slightly so we can access the `useAuth` hook's functions.                                                                                   │
 │    236 ```tsx                                                                                                                                                                  │
 │    237 import React from 'react';                                                                                                                                              │
 │    238 import ReactDOM from 'react-dom/client';                                                                                                                                │
 │    239 import { ApolloProvider, ApolloClient, InMemoryCache } from '@apollo/client';                                                                                           │
 │    240 import { AuthProvider, useAuth } from './contexts/AuthContext';                                                                                                         │
 │    241 import App from './App.tsx';                                                                                                                                            │
 │    242 import './index.css';                                                                                                                                                   │
 │    243 import { createApolloClient } from './api/apollo.ts';                                                                                                                   │
 │    244                                                                                                                                                                         │
 │    245 const Main = () => {                                                                                                                                                    │
 │    246   // We need to be inside AuthProvider to use the useAuth hook                                                                                                          │
 │    247   const { setIsRefreshing, logout } = useAuth();                                                                                                                        │
 │    248   const client = createApolloClient(setIsRefreshing, logout);                                                                                                           │
 │    249                                                                                                                                                                         │
 │    250   return (                                                                                                                                                              │
 │    251     <ApolloProvider client={client}>                                                                                                                                    │
 │    252       <App />                                                                                                                                                           │
 │    253     </ApolloProvider>                                                                                                                                                   │
 │    254   );                                                                                                                                                                    │
 │    255 };                                                                                                                                                                      │
 │    256                                                                                                                                                                         │
 │    257 ReactDOM.createRoot(document.getElementById('root')!).render(                                                                                                           │
 │    258   <React.StrictMode>                                                                                                                                                    │
 │    259     <AuthProvider>                                                                                                                                                      │
 │    260       <Main />                                                                                                                                                          │
 │    261     </AuthProvider>                                                                                                                                                     │
 │    262   </React.StrictMode>                                                                                                                                                   │
 │    263 );                                                                                                                                                                      │
 │    264 ```                                                                                                                                                                     │
 │    265                                                                                                                                                                         │
 │    266 ## 5. Verification                                                                                                                                                      │
 │    267                                                                                                                                                                         │
 │    268 This is the most difficult part to test.                                                                                                                                │
 │    269                                                                                                                                                                         │
 │    270 1.  **Simulate Expired Token**:                                                                                                                                         │
 │    271     *   Log in to the application normally.                                                                                                                             │
 │    272     *   Go into your browser's developer tools.                                                                                                                         │
 │    273     *   In `localStorage`, manually change the `token` to an invalid value (e.g., `eyJhb...invalid`).                                                                   │
 │    274     *   Refresh the `HomePage`.                                                                                                                                         │
 │    275 2.  **Observe Behavior**:                                                                                                                                               │
 │    276     *   The `me` query on the `HomePage` should fail with an "Unauthorized" error.                                                                                      │
 │    277     *   The UI should be blocked by the "Refreshing session..." overlay.                                                                                                │
 │    278     *   The application should send a `refreshToken` mutation in the background.                                                                                        │
 │    279     *   If the refresh is successful, the overlay should disappear, the `me` query should be retried (this time with a valid token), and the page should                │
 │        load correctly.                                                                                                                                                         │
 │    280     *   If the `refreshToken` is also invalid or expired, you should be logged out and redirected to the `LoginPage`.                                                   │
 ╰────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
✦ I will now create the eighth prompt file, which begins the mobile application implementation.
 ╭────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
 │ ✔  WriteFile Writing to 08-feat(mobileap...-dependencies.md                                                                                                                    │
 │                                                                                                                                                                                │
 │     1 You are an expert mobile software engineer. Your task is to initialize a new React Native project using Expo and install its core dependencies.                          │
 │     2                                                                                                                                                                          │
 │     3 **Commit Title:** `feat(mobileapp): initialize project and install dependencies`                                                                                         │
 │     4                                                                                                                                                                          │
 │     5 ## 1. Project Initialization                                                                                                                                             │
 │     6                                                                                                                                                                          │
 │     7 From the `monolith-frontend` directory, create a new Expo project named `mobileapp`. When prompted, choose the "Blank" template.                                         │
 │     8                                                                                                                                                                          │
 │     9 ```bash                                                                                                                                                                  │
 │    10 npx create-expo-app mobileapp                                                                                                                                            │
 │    11 ```                                                                                                                                                                      │
 │    12                                                                                                                                                                          │
 │    13 Navigate into the new directory:                                                                                                                                         │
 │    14                                                                                                                                                                          │
 │    15 ```bash                                                                                                                                                                  │
 │    16 cd mobileapp                                                                                                                                                             │
 │    17 ```                                                                                                                                                                      │
 │    18                                                                                                                                                                          │
 │    19 ## 2. Install Dependencies                                                                                                                                               │
 │    20                                                                                                                                                                          │
 │    21 Install the necessary dependencies for UI components (React Native Paper), GraphQL (Apollo), and secure storage (`AsyncStorage`).                                        │
 │    22                                                                                                                                                                          │
 │    23 ```bash                                                                                                                                                                  │
 │    24 npx expo install react-native-paper @react-native-async-storage/async-storage @apollo/client graphql                                                                     │
 │    25 ```                                                                                                                                                                      │
 │    26 Using `npx expo install` is important as it ensures compatible versions of the native libraries are installed.                                                           │
 │    27                                                                                                                                                                          │
 │    28 ## 3. Configure React Native Paper                                                                                                                                       │
 │    29                                                                                                                                                                          │
 │    30 To use React Native Paper, you need to wrap your application in its `PaperProvider`.                                                                                     │
 │    31                                                                                                                                                                          │
 │    32 **`App.tsx`:**                                                                                                                                                           │
 │    33 Replace the entire file content with the following setup.                                                                                                                │
 │    34 ```tsx                                                                                                                                                                   │
 │    35 import React from 'react';                                                                                                                                               │
 │    36 import { PaperProvider } from 'react-native-paper';                                                                                                                      │
 │    37 import { View, Text, StyleSheet } from 'react-native';                                                                                                                   │
 │    38                                                                                                                                                                          │
 │    39 export default function App() {                                                                                                                                          │
 │    40   return (                                                                                                                                                               │
 │    41     <PaperProvider>                                                                                                                                                      │
 │    42       <View style={styles.container}>                                                                                                                                    │
 │    43         <Text>Mobile App Placeholder</Text>                                                                                                                              │
 │    44       </View>                                                                                                                                                            │
 │    45     </PaperProvider>                                                                                                                                                     │
 │    46   );                                                                                                                                                                     │
 │    47 }                                                                                                                                                                        │
 │    48                                                                                                                                                                          │
 │    49 const styles = StyleSheet.create({                                                                                                                                       │
 │    50   container: {                                                                                                                                                           │
 │    51     flex: 1,                                                                                                                                                             │
 │    52     backgroundColor: '#fff',                                                                                                                                             │
 │    53     alignItems: 'center',                                                                                                                                                │
 │    54     justifyContent: 'center',                                                                                                                                            │
 │    55   },                                                                                                                                                                     │
 │    56 });                                                                                                                                                                      │
 │    57 ```                                                                                                                                                                      │
 │    58                                                                                                                                                                          │
 │    59 ## 4. Verification                                                                                                                                                       │
 │    60                                                                                                                                                                          │
 │    61 After completing these steps, run the development server:                                                                                                                │
 │    62                                                                                                                                                                          │
 │    63 ```bash                                                                                                                                                                  │
 │    64 npx expo start                                                                                                                                                           │
 │    65 ```                                                                                                                                                                      │
 │    66                                                                                                                                                                          │
 │    67 This will open a terminal interface with a QR code. Scan the QR code with the Expo Go app on your iOS or Android device.                                                 │
 │    68                                                                                                                                                                          │
 │    69 The app should load and display the text "Mobile App Placeholder" on a white background. This confirms the project is set up correctly and the core                      │
 │       dependencies are in place.                                                                                                                                               │
 ╰────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
✦ I will now create the ninth prompt file.
 ╭────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
 │ ✔  WriteFile Writing to 09-feat(mobileap...login-page-UI.md                                                                                                                    │
 │                                                                                                                                                                                │
 │      1 You are an expert mobile software engineer. Building on the initialized mobile app, your task is to create the static user interface for the login page                 │
 │        using React Native Paper components.                                                                                                                                    │
 │      2                                                                                                                                                                         │
 │      3 **Commit Title:** `feat(mobileapp): create static login page UI`                                                                                                        │
 │      4                                                                                                                                                                         │
 │      5 ## 1. Create the Login Page Component                                                                                                                                   │
 │      6                                                                                                                                                                         │
 │      7 Create a new directory `src/pages` and a new file `src/pages/LoginPage.tsx`. This component will contain the login form, styled with React Native Paper.                │
 │      8                                                                                                                                                                         │
 │      9 **`src/pages/LoginPage.tsx`:**                                                                                                                                          │
 │     10 ```tsx                                                                                                                                                                  │
 │     11 import React from 'react';                                                                                                                                              │
 │     12 import { View, StyleSheet } from 'react-native';                                                                                                                        │
 │     13 import { TextInput, Button, Text } from 'react-native-paper';                                                                                                           │
 │     14                                                                                                                                                                         │
 │     15 const LoginPage = () => {                                                                                                                                               │
 │     16   return (                                                                                                                                                              │
 │     17     <View style={styles.container}>                                                                                                                                     │
 │     18       <View style={styles.content}>                                                                                                                                     │
 │     19         <Text variant="headlineLarge" style={styles.title}>Login</Text>                                                                                                 │
 │     20                                                                                                                                                                         │
 │     21         {/* This View will be used for success/failure messages */}                                                                                                     │
 │     22         <View style={styles.messageContainer}></View>                                                                                                                   │
 │     23                                                                                                                                                                         │
 │     24         <TextInput                                                                                                                                                      │
 │     25           label="Username"                                                                                                                                              │
 │     26           mode="outlined"                                                                                                                                               │
 │     27           style={styles.input}                                                                                                                                          │
 │     28           autoCapitalize="none"                                                                                                                                         │
 │     29         />                                                                                                                                                              │
 │     30         <TextInput                                                                                                                                                      │
 │     31           label="Password"                                                                                                                                              │
 │     32           mode="outlined"                                                                                                                                               │
 │     33           style={styles.input}                                                                                                                                          │
 │     34           secureTextEntry                                                                                                                                               │
 │     35         />                                                                                                                                                              │
 │     36         <Button                                                                                                                                                         │
 │     37           mode="contained"                                                                                                                                              │
 │     38           style={styles.button}                                                                                                                                         │
 │     39         >                                                                                                                                                               │
 │     40           Sign In                                                                                                                                                       │
 │     41         </Button>                                                                                                                                                       │
 │     42       </View>                                                                                                                                                           │
 │     43     </View>                                                                                                                                                             │
 │     44   );                                                                                                                                                                    │
 │     45 };                                                                                                                                                                      │
 │     46                                                                                                                                                                         │
 │     47 const styles = StyleSheet.create({                                                                                                                                      │
 │     48   container: {                                                                                                                                                          │
 │     49     flex: 1,                                                                                                                                                            │
 │     50     justifyContent: 'center',                                                                                                                                           │
 │     51     backgroundColor: '#f5f5f5',                                                                                                                                         │
 │     52   },                                                                                                                                                                    │
 │     53   content: {                                                                                                                                                            │
 │     54     padding: 20,                                                                                                                                                        │
 │     55   },                                                                                                                                                                    │
 │     56   title: {                                                                                                                                                              │
 │     57     textAlign: 'center',                                                                                                                                                │
 │     58     marginBottom: 24,                                                                                                                                                   │
 │     59   },                                                                                                                                                                    │
 │     60   messageContainer: {                                                                                                                                                   │
 │     61     marginBottom: 16,                                                                                                                                                   │
 │     62     minHeight: 20,                                                                                                                                                      │
 │     63   },                                                                                                                                                                    │
 │     64   input: {                                                                                                                                                              │
 │     65     marginBottom: 16,                                                                                                                                                   │
 │     66   },                                                                                                                                                                    │
 │     67   button: {                                                                                                                                                             │
 │     68     marginTop: 8,                                                                                                                                                       │
 │     69   },                                                                                                                                                                    │
 │     70 });                                                                                                                                                                     │
 │     71                                                                                                                                                                         │
 │     72 export default LoginPage;                                                                                                                                               │
 │     73 ```                                                                                                                                                                     │
 │     74                                                                                                                                                                         │
 │     75 ## 2. Render the Login Page                                                                                                                                             │
 │     76                                                                                                                                                                         │
 │     77 Update `App.tsx` to render the newly created `LoginPage`. Note that we are removing the placeholder styles and wrapping the app in a `SafeAreaView` for                 │
 │        better layout on notched devices, although for this centered screen it's less critical.                                                                                 │
 │     78                                                                                                                                                                         │
 │     79 **`App.tsx`:**                                                                                                                                                          │
 │     80 ```tsx                                                                                                                                                                  │
 │     81 import React from 'react';                                                                                                                                              │
 │     82 import { PaperProvider } from 'react-native-paper';                                                                                                                     │
 │     83 import { SafeAreaView, StyleSheet } from 'react-native';                                                                                                                │
 │     84 import LoginPage from './src/pages/LoginPage';                                                                                                                          │
 │     85                                                                                                                                                                         │
 │     86 export default function App() {                                                                                                                                         │
 │     87   return (                                                                                                                                                              │
 │     88     <PaperProvider>                                                                                                                                                     │
 │     89       <SafeAreaView style={styles.container}>                                                                                                                           │
 │     90         <LoginPage />                                                                                                                                                   │
 │     91       </SafeAreaView>                                                                                                                                                   │
 │     92     </PaperProvider>                                                                                                                                                    │
 │     93   );                                                                                                                                                                    │
 │     94 }                                                                                                                                                                       │
 │     95                                                                                                                                                                         │
 │     96 const styles = StyleSheet.create({                                                                                                                                      │
 │     97   container: {                                                                                                                                                          │
 │     98     flex: 1,                                                                                                                                                            │
 │     99   },                                                                                                                                                                    │
 │    100 });                                                                                                                                                                     │
 │    101 ```                                                                                                                                                                     │
 │    102                                                                                                                                                                         │
 │    103 ## 3. Verification                                                                                                                                                      │
 │    104                                                                                                                                                                         │
 │    105 Run the application (`npx expo start`) and open it in the Expo Go app.                                                                                                  │
 │    106                                                                                                                                                                         │
 │    107 The screen should now display a login form with "Username" and "Password" fields and a "Sign In" button, all styled according to Material Design principles             │
 │        via React Native Paper.                                                                                                                                                 │
 ╰────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯

✦ I will now create the tenth prompt file.
 ╭──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
 │ ✔  WriteFile Writing to 10-feat(mobileap...apollo-client.md                                                                                                          │
 │                                                                                                                                                                      │
 │     1 You are an expert mobile software engineer. Your next task is to configure the Apollo Client for the React Native app to handle communication with the         │
 │       GraphQL backend.                                                                                                                                               │
 │     2                                                                                                                                                                │
 │     3 **Commit Title:** `feat(mobileapp): configure basic apollo client`                                                                                             │
 │     4                                                                                                                                                                │
 │     5 ## 1. Create the Apollo Client Instance                                                                                                                        │
 │     6                                                                                                                                                                │
 │     7 Create a new directory `src/api` and a new file `src/api/apollo.ts`. This will house the Apollo Client configuration. Note the use of the full, absolute URL   │
 │       for the API endpoint as required by the spec for mobile.                                                                                                       │
 │     8                                                                                                                                                                │
 │     9 **`src/api/apollo.ts`:**                                                                                                                                       │
 │    10 ```ts                                                                                                                                                          │
 │    11 import { ApolloClient, InMemoryCache, createHttpLink } from '@apollo/client';                                                                                  │
 │    12                                                                                                                                                                │
 │    13 const httpLink = createHttpLink({                                                                                                                              │
 │    14   uri: 'https://blobfishapp.duckdns.org/graphql',                                                                                                              │
 │    15 });                                                                                                                                                            │
 │    16                                                                                                                                                                │
 │    17 const client = new ApolloClient({                                                                                                                              │
 │    18   link: httpLink,                                                                                                                                              │
 │    19   cache: new InMemoryCache(),                                                                                                                                  │
 │    20 });                                                                                                                                                            │
 │    21                                                                                                                                                                │
 │    22 export default client;                                                                                                                                         │
 │    23 ```                                                                                                                                                            │
 │    24                                                                                                                                                                │
 │    25 ## 2. Provide the Client to the Application                                                                                                                    │
 │    26                                                                                                                                                                │
 │    27 To make the Apollo Client instance available to the entire component tree, you need to wrap the root component with the `ApolloProvider`.                      │
 │    28                                                                                                                                                                │
 │    29 Update `App.tsx` to import the client and the provider.                                                                                                        │
 │    30                                                                                                                                                                │
 │    31 **`App.tsx`:**                                                                                                                                                 │
 │    32 ```tsx                                                                                                                                                         │
 │    33 import React from 'react';                                                                                                                                     │
 │    34 import { PaperProvider } from 'react-native-paper';                                                                                                            │
 │    35 import { SafeAreaView, StyleSheet } from 'react-native';                                                                                                       │
 │    36 import { ApolloProvider } from '@apollo/client';                                                                                                               │
 │    37 import LoginPage from './src/pages/LoginPage';                                                                                                                 │
 │    38 import client from './src/api/apollo';                                                                                                                         │
 │    39                                                                                                                                                                │
 │    40 export default function App() {                                                                                                                                │
 │    41   return (                                                                                                                                                     │
 │    42     <ApolloProvider client={client}>                                                                                                                           │
 │    43       <PaperProvider>                                                                                                                                          │
 │    44         <SafeAreaView style={styles.container}>                                                                                                                │
 │    45           <LoginPage />                                                                                                                                        │
 │    46         </SafeAreaView>                                                                                                                                        │
 │    47       </PaperProvider>                                                                                                                                         │
 │    48     </ApolloProvider>                                                                                                                                          │
 │    49   );                                                                                                                                                           │
 │    50 }                                                                                                                                                              │
 │    51                                                                                                                                                                │
 │    52 const styles = StyleSheet.create({                                                                                                                             │
 │    53   container: {                                                                                                                                                 │
 │    54     flex: 1,                                                                                                                                                   │
 │    55   },                                                                                                                                                           │
 │    56 });                                                                                                                                                            │
 │    57 ```                                                                                                                                                            │
 │    58                                                                                                                                                                │
 │    59 ## 3. Verification                                                                                                                                             │
 │    60                                                                                                                                                                │
 │    61 Run the application (`npx expo start`). There should be no visible changes. The login form should still be displayed as before. This step confirms that the    │
 │       Apollo Client has been initialized and provided to the application correctly without causing any errors.                                                       │
 ╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
✦ I will now create the eleventh prompt file.
 ╭──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
 │ ✔  WriteFile Writing to 11-feat(mobileap...ogin-mutation.md                                                                                                          │
 │                                                                                                                                                                      │
 │      1 You are an expert mobile software engineer. Your task is to implement the login functionality in the React Native app by connecting the UI to the GraphQL     │
 │        API.                                                                                                                                                          │
 │      2                                                                                                                                                               │
 │      3 **Commit Title:** `feat(mobileapp): implement login mutation`                                                                                                 │
 │      4                                                                                                                                                               │
 │      5 ## 1. Define the GraphQL Mutation                                                                                                                             │
 │      6                                                                                                                                                               │
 │      7 Create a new directory `src/graphql` and a file `src/graphql/mutations.ts`.                                                                                   │
 │      8                                                                                                                                                               │
 │      9 **`src/graphql/mutations.ts`:**                                                                                                                               │
 │     10 ```ts                                                                                                                                                         │
 │     11 import { gql } from '@apollo/client';                                                                                                                         │
 │     12                                                                                                                                                               │
 │     13 export const LOGIN_MUTATION = gql`                                                                                                                            │
 │     14   mutation Login($username: String!, $password: String!) {                                                                                                    │
 │     15     login(input: { username: $username, password: $password }) {                                                                                              │
 │     16       success                                                                                                                                                 │
 │     17       token                                                                                                                                                   │
 │     18       refreshToken                                                                                                                                            │
 │     19       errors                                                                                                                                                  │
 │     20     }                                                                                                                                                         │
 │     21   }                                                                                                                                                           │
 │     22 `;                                                                                                                                                            │
 │     23 ```                                                                                                                                                           │
 │     24                                                                                                                                                               │
 │     25 ## 2. Update the Login Page to Handle State and Mutations                                                                                                     │
 │     26                                                                                                                                                               │
 │     27 Modify `src/pages/LoginPage.tsx` to make it a stateful, controlled component that uses the `useMutation` hook.                                                │
 │     28                                                                                                                                                               │
 │     29 **`src/pages/LoginPage.tsx`:**                                                                                                                                │
 │     30 ```tsx                                                                                                                                                        │
 │     31 import React, { useState } from 'react';                                                                                                                      │
 │     32 import { View, StyleSheet } from 'react-native';                                                                                                              │
 │     33 import { TextInput, Button, Text, HelperText } from 'react-native-paper';                                                                                     │
 │     34 import { useMutation } from '@apollo/client';                                                                                                                 │
 │     35 import { LOGIN_MUTATION } from '../graphql/mutations';                                                                                                        │
 │     36                                                                                                                                                               │
 │     37 interface MessageState {                                                                                                                                      │
 │     38   text: string;                                                                                                                                               │
 │     39   type: 'success' | 'error' | '';                                                                                                                             │
 │     40 }                                                                                                                                                             │
 │     41                                                                                                                                                               │
 │     42 const LoginPage = () => {                                                                                                                                     │
 │     43   const [username, setUsername] = useState('');                                                                                                               │
 │     44   const [password, setPassword] = useState('');                                                                                                               │
 │     45   const [message, setMessage] = useState<MessageState>({ text: '', type: '' });                                                                               │
 │     46                                                                                                                                                               │
 │     47   const [login, { loading }] = useMutation(LOGIN_MUTATION, {                                                                                                  │
 │     48     onCompleted: (data) => {                                                                                                                                  │
 │     49       if (data.login.success) {                                                                                                                               │
 │     50         setMessage({ text: 'Login successful!', type: 'success' });                                                                                           │
 │     51       } else {                                                                                                                                                │
 │     52         const errorMessage = data.login.errors?.join(', ') || 'An unknown error occurred.';                                                                   │
 │     53         setMessage({ text: `Login failed: ${errorMessage}`, type: 'error' });                                                                                 │
 │     54       }                                                                                                                                                       │
 │     55     },                                                                                                                                                        │
 │     56     onError: (error) => {                                                                                                                                     │
 │     57       setMessage({ text: `An error occurred: ${error.message}`, type: 'error' });                                                                             │
 │     58     },                                                                                                                                                        │
 │     59   });                                                                                                                                                         │
 │     60                                                                                                                                                               │
 │     61   const handleSubmit = () => {                                                                                                                                │
 │     62     setMessage({ text: '', type: '' });                                                                                                                       │
 │     63     login({ variables: { username, password } });                                                                                                             │
 │     64   };                                                                                                                                                          │
 │     65                                                                                                                                                               │
 │     66   return (                                                                                                                                                    │
 │     67     <View style={styles.container}>                                                                                                                           │
 │     68       <View style={styles.content}>                                                                                                                           │
 │     69         <Text variant="headlineLarge" style={styles.title}>Login</Text>                                                                                       │
 │     70                                                                                                                                                               │
 │     71         <View style={styles.messageContainer}>                                                                                                                │
 │     72           {message.text ? (                                                                                                                                   │
 │     73             <HelperText type={message.type === 'error' ? 'error' : 'info'} visible={true}>                                                                    │
 │     74               {message.text}                                                                                                                                  │
 │     75             </HelperText>                                                                                                                                     │
 │     76           ) : null}                                                                                                                                           │
 │     77         </View>                                                                                                                                               │
 │     78                                                                                                                                                               │
 │     79         <TextInput                                                                                                                                            │
 │     80           label="Username"                                                                                                                                    │
 │     81           value={username}                                                                                                                                    │
 │     82           onChangeText={setUsername}                                                                                                                          │
 │     83           mode="outlined"                                                                                                                                     │
 │     84           style={styles.input}                                                                                                                                │
 │     85           autoCapitalize="none"                                                                                                                               │
 │     86         />                                                                                                                                                    │
 │     87         <TextInput                                                                                                                                            │
 │     88           label="Password"                                                                                                                                    │
 │     89           value={password}                                                                                                                                    │
 │     90           onChangeText={setPassword}                                                                                                                          │
 │     91           mode="outlined"                                                                                                                                     │
 │     92           style={styles.input}                                                                                                                                │
 │     93           secureTextEntry                                                                                                                                     │
 │     94         />                                                                                                                                                    │
 │     95         <Button                                                                                                                                               │
 │     96           mode="contained"                                                                                                                                    │
 │     97           onPress={handleSubmit}                                                                                                                              │
 │     98           loading={loading}                                                                                                                                   │
 │     99           disabled={loading}                                                                                                                                  │
 │    100           style={styles.button}                                                                                                                               │
 │    101         >                                                                                                                                                     │
 │    102           Sign In                                                                                                                                             │
 │    103         </Button>                                                                                                                                             │
 │    104       </View>                                                                                                                                                 │
 │    105     </View>                                                                                                                                                   │
 │    106   );                                                                                                                                                          │
 │    107 };                                                                                                                                                            │
 │    108                                                                                                                                                               │
 │    109 const styles = StyleSheet.create({                                                                                                                            │
 │    110   container: {                                                                                                                                                │
 │    111     flex: 1,                                                                                                                                                  │
 │    112     justifyContent: 'center',                                                                                                                                 │
 │    113     backgroundColor: '#f5f5f5',                                                                                                                               │
 │    114   },                                                                                                                                                          │
 │    115   content: {                                                                                                                                                  │
 │    116     padding: 20,                                                                                                                                              │
 │    117   },                                                                                                                                                          │
 │    118   title: {                                                                                                                                                    │
 │    119     textAlign: 'center',                                                                                                                                      │
 │    120     marginBottom: 24,                                                                                                                                         │
 │    121   },                                                                                                                                                          │
 │    122   messageContainer: {                                                                                                                                         │
 │    123     marginBottom: 16,                                                                                                                                         │
 │    124     minHeight: 20,                                                                                                                                            │
 │    125   },                                                                                                                                                          │
 │    126   input: {                                                                                                                                                    │
 │    127     marginBottom: 16,                                                                                                                                         │
 │    128   },                                                                                                                                                          │
 │    129   button: {                                                                                                                                                   │
 │    130     marginTop: 8,                                                                                                                                             │
 │    131   },                                                                                                                                                          │
 │    132 });                                                                                                                                                           │
 │    133                                                                                                                                                               │
 │    134 export default LoginPage;                                                                                                                                     │
 │    135 ```                                                                                                                                                           │
 │    136                                                                                                                                                               │
 │    137 ## 3. Verification                                                                                                                                            │
 │    138                                                                                                                                                               │
 │    139 1.  Run the application (`npx expo start`).                                                                                                                   │
 │    140 2.  **Test Failure**: Enter incorrect credentials and tap "Sign In". A red error message should appear below the form fields.                                 │
 │    141 3.  **Test Success**: Enter correct credentials and tap "Sign In". A success message should appear.                                                           │
 │    142 4.  **Test Loading State**: While the mutation is in progress, the "Sign In" button should show a loading indicator and be disabled.                          │
 ╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
✦ I will now create the twelfth prompt file.
 ╭──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
 │ ✔  WriteFile Writing to 12-feat(mobileap...token-storage.md                                                                                                          │
 │                                                                                                                                                                      │
 │      1 You are an expert mobile software engineer. Your task is to create an authentication context for the mobile app to manage user state and persist tokens to    │
 │        `AsyncStorage`.                                                                                                                                               │
 │      2                                                                                                                                                               │
 │      3 **Commit Title:** `feat(mobileapp): implement AuthContext and token storage`                                                                                  │
 │      4                                                                                                                                                               │
 │      5 ## 1. Create the AuthContext                                                                                                                                  │
 │      6                                                                                                                                                               │
 │      7 Create a new directory `src/contexts` and a file `src/contexts/AuthContext.tsx`. This context will be very similar to the web app's, but will use             │
 │        `AsyncStorage`.                                                                                                                                               │
 │      8                                                                                                                                                               │
 │      9 **`src/contexts/AuthContext.tsx`:**                                                                                                                           │
 │     10 ```tsx                                                                                                                                                        │
 │     11 import React, { createContext, useState, useContext, ReactNode, useEffect } from 'react';                                                                     │
 │     12 import AsyncStorage from '@react-native-async-storage/async-storage';                                                                                         │
 │     13                                                                                                                                                               │
 │     14 interface AuthContextType {                                                                                                                                   │
 │     15   token: string | null;                                                                                                                                       │
 │     16   isLoading: boolean; // To handle async storage loading                                                                                                      │
 │     17   saveTokens: (newToken: string, newRefreshToken: string) => Promise<void>;                                                                                   │
 │     18   logout: () => Promise<void>;                                                                                                                                │
 │     19 }                                                                                                                                                             │
 │     20                                                                                                                                                               │
 │     21 const AuthContext = createContext<AuthContextType | null>(null);                                                                                              │
 │     22                                                                                                                                                               │
 │     23 export const AuthProvider = ({ children }: { children: ReactNode }) => {                                                                                      │
 │     24   const [token, setToken] = useState<string | null>(null);                                                                                                    │
 │     25   const [isLoading, setIsLoading] = useState(true);                                                                                                           │
 │     26                                                                                                                                                               │
 │     27   useEffect(() => {                                                                                                                                           │
 │     28     const loadToken = async () => {                                                                                                                           │
 │     29       try {                                                                                                                                                   │
 │     30         const storedToken = await AsyncStorage.getItem('token');                                                                                              │
 │     31         setToken(storedToken);                                                                                                                                │
 │     32       } catch (e) {                                                                                                                                           │
 │     33         console.error('Failed to load token from storage', e);                                                                                                │
 │     34       } finally {                                                                                                                                             │
 │     35         setIsLoading(false);                                                                                                                                  │
 │     36       }                                                                                                                                                       │
 │     37     };                                                                                                                                                        │
 │     38                                                                                                                                                               │
 │     39     loadToken();                                                                                                                                              │
 │     40   }, []);                                                                                                                                                     │
 │     41                                                                                                                                                               │
 │     42   const saveTokens = async (newToken: string, newRefreshToken: string) => {                                                                                   │
 │     43     try {                                                                                                                                                     │
 │     44       await AsyncStorage.setItem('token', newToken);                                                                                                          │
 │     45       await AsyncStorage.setItem('refreshToken', newRefreshToken);                                                                                            │
 │     46       setToken(newToken);                                                                                                                                     │
 │     47     } catch (e) {                                                                                                                                             │
 │     48       console.error('Failed to save tokens to storage', e);                                                                                                   │
 │     49     }                                                                                                                                                         │
 │     50   };                                                                                                                                                          │
 │     51                                                                                                                                                               │
 │     52   const logout = async () => {                                                                                                                                │
 │     53     try {                                                                                                                                                     │
 │     54       await AsyncStorage.removeItem('token');                                                                                                                 │
 │     55       await AsyncStorage.removeItem('refreshToken');                                                                                                          │
 │     56       setToken(null);                                                                                                                                         │
 │     57     } catch (e) {                                                                                                                                             │
 │     58       console.error('Failed to remove tokens from storage', e);                                                                                               │
 │     59     }                                                                                                                                                         │
 │     60   };                                                                                                                                                          │
 │     61                                                                                                                                                               │
 │     62   const authContextValue = {                                                                                                                                  │
 │     63     token,                                                                                                                                                    │
 │     64     isLoading,                                                                                                                                                │
 │     65     saveTokens,                                                                                                                                               │
 │     66     logout,                                                                                                                                                   │
 │     67   };                                                                                                                                                          │
 │     68                                                                                                                                                               │
 │     69   return (                                                                                                                                                    │
 │     70     <AuthContext.Provider value={authContextValue}>                                                                                                           │
 │     71       {children}                                                                                                                                              │
 │     72     </AuthContext.Provider>                                                                                                                                   │
 │     73   );                                                                                                                                                          │
 │     74 };                                                                                                                                                            │
 │     75                                                                                                                                                               │
 │     76 export const useAuth = () => {                                                                                                                                │
 │     77   const context = useContext(AuthContext);                                                                                                                    │
 │     78   if (!context) {                                                                                                                                             │
 │     79     throw new Error('useAuth must be used within an AuthProvider');                                                                                           │
 │     80   }                                                                                                                                                           │
 │     81   return context;                                                                                                                                             │
 │     82 };                                                                                                                                                            │
 │     83 ```                                                                                                                                                           │
 │     84                                                                                                                                                               │
 │     85 ## 2. Provide the AuthContext to the Application                                                                                                              │
 │     86                                                                                                                                                               │
 │     87 Wrap the existing providers with the new `AuthProvider` in `App.tsx`.                                                                                         │
 │     88                                                                                                                                                               │
 │     89 **`App.tsx`:**                                                                                                                                                │
 │     90 ```tsx                                                                                                                                                        │
 │     91 import React from 'react';                                                                                                                                    │
 │     92 import { PaperProvider } from 'react-native-paper';                                                                                                           │
 │     93 import { SafeAreaView, StyleSheet } from 'react-native';                                                                                                      │
 │     94 import { ApolloProvider } from '@apollo/client';                                                                                                              │
 │     95 import { AuthProvider } from './src/contexts/AuthContext';                                                                                                    │
 │     96 import LoginPage from './src/pages/LoginPage';                                                                                                                │
 │     97 import client from './src/api/apollo';                                                                                                                        │
 │     98                                                                                                                                                               │
 │     99 export default function App() {                                                                                                                               │
 │    100   return (                                                                                                                                                    │
 │    101     <AuthProvider>                                                                                                                                            │
 │    102       <ApolloProvider client={client}>                                                                                                                        │
 │    103         <PaperProvider>                                                                                                                                       │
 │    104           <SafeAreaView style={styles.container}>                                                                                                             │
 │    105             <LoginPage />                                                                                                                                     │
 │    106           </SafeAreaView>                                                                                                                                     │
 │    107         </PaperProvider>                                                                                                                                      │
 │    108       </ApolloProvider>                                                                                                                                       │
 │    109     </AuthProvider>                                                                                                                                           │
 │    110   );                                                                                                                                                          │
 │    111 }                                                                                                                                                             │
 │    112                                                                                                                                                               │
 │    113 const styles = StyleSheet.create({                                                                                                                            │
 │    114   container: {                                                                                                                                                │
 │    115     flex: 1,                                                                                                                                                  │
 │    116   },                                                                                                                                                          │
 │    117 });                                                                                                                                                           │
 │    118 ```                                                                                                                                                           │
 │    119                                                                                                                                                               │
 │    120 ## 3. Integrate AuthContext with the Login Page                                                                                                               │
 │    121                                                                                                                                                               │
 │    122 Update `src/pages/LoginPage.tsx` to use the `useAuth` hook and save the tokens upon a successful login.                                                       │
 │    123                                                                                                                                                               │
 │    124 **`src/pages/LoginPage.tsx` (partial changes):**                                                                                                              │
 │    125 First, add the `useAuth` import:                                                                                                                              │
 │    126 ```tsx                                                                                                                                                        │
 │    127 import { useAuth } from '../contexts/AuthContext';                                                                                                            │
 │    128 ```                                                                                                                                                           │
 │    129                                                                                                                                                               │
 │    130 Next, get the `saveTokens` function from the context:                                                                                                         │
 │    131 ```tsx                                                                                                                                                        │
 │    132 // inside the LoginPage component                                                                                                                             │
 │    133 const { saveTokens } = useAuth();                                                                                                                             │
 │    134 ```                                                                                                                                                           │
 │    135                                                                                                                                                               │
 │    136 Finally, update the `onCompleted` handler for the mutation to call `saveTokens`. Note that it's an `async` call.                                              │
 │    137 ```tsx                                                                                                                                                        │
 │    138 // inside the useMutation hook options                                                                                                                        │
 │    139 onCompleted: async (data) => {                                                                                                                                │
 │    140   if (data.login.success) {                                                                                                                                   │
 │    141     setMessage({ text: 'Login successful!', type: 'success' });                                                                                               │
 │    142     await saveTokens(data.login.token, data.login.refreshToken);                                                                                              │
 │    143   } else {                                                                                                                                                    │
 │    144     // ... same as before                                                                                                                                     │
 │    145   }                                                                                                                                                           │
 │    146 },                                                                                                                                                            │
 │    147 ```                                                                                                                                                           │
 │    148                                                                                                                                                               │
 │    149 ## 4. Verification                                                                                                                                            │
 │    150                                                                                                                                                               │
 │    151 1.  Run the application.                                                                                                                                      │
 │    152 2.  Perform a successful login.                                                                                                                               │
 │    153 3.  The tokens should be saved to `AsyncStorage`. While you can't inspect this directly like in a browser, the app should function correctly in the next      │
 │        step.                                                                                                                                                         │
 │    154 4.  To verify persistence, fully close the Expo Go app and reopen it. The user should remain logged in (which we will build the UI for in the next step).     │
 │        The `isLoading` state in the context will handle the initial check.                                                                                           │
 ╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
✦ I will now create the thirteenth prompt file.
 ╭──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
 │ ✔  WriteFile Writing to 13-feat(mobileap...basic-routing.md                                                                                                          │
 │                                                                                                                                                                      │
 │      1 You are an expert mobile software engineer. Your task is to add the authentication token to the headers of all GraphQL requests and create a simple           │
 │        authenticated view, mirroring the web app's functionality.                                                                                                    │
 │      2                                                                                                                                                               │
 │      3 **Commit Title:** `feat(mobileapp): implement authenticated apollo link and basic routing`                                                                    │
 │      4                                                                                                                                                               │
 │      5 ## 1. Create a Home Page for Authenticated Users                                                                                                              │
 │      6                                                                                                                                                               │
 │      7 Create a new page at `src/pages/HomePage.tsx`.                                                                                                                │
 │      8                                                                                                                                                               │
 │      9 **`src/graphql/queries.ts`:**                                                                                                                                 │
 │     10 Create a new file for queries.                                                                                                                                │
 │     11 ```ts                                                                                                                                                         │
 │     12 import { gql } from '@apollo/client';                                                                                                                         │
 │     13                                                                                                                                                               │
 │     14 export const ME_QUERY = gql`                                                                                                                                  │
 │     15   query Me {                                                                                                                                                  │
 │     16     me {                                                                                                                                                      │
 │     17       username                                                                                                                                                │
 │     18       firstName                                                                                                                                               │
 │     19     }                                                                                                                                                         │
 │     20   }                                                                                                                                                           │
 │     21 `;                                                                                                                                                            │
 │     22 ```                                                                                                                                                           │
 │     23                                                                                                                                                               │
 │     24 **`src/pages/HomePage.tsx`:**                                                                                                                                 │
 │     25 ```tsx                                                                                                                                                        │
 │     26 import React from 'react';                                                                                                                                    │
 │     27 import { View, StyleSheet } from 'react-native';                                                                                                              │
 │     28 import { useQuery } from '@apollo/client';                                                                                                                    │
 │     29 import { useAuth } from '../contexts/AuthContext';                                                                                                            │
 │     30 import { ME_QUERY } from '../graphql/queries';                                                                                                                │
 │     31 import { Text, Button, ActivityIndicator } from 'react-native-paper';                                                                                         │
 │     32                                                                                                                                                               │
 │     33 const HomePage = () => {                                                                                                                                      │
 │     34   const { logout } = useAuth();                                                                                                                               │
 │     35   const { data, loading, error } = useQuery(ME_QUERY);                                                                                                        │
 │     36                                                                                                                                                               │
 │     37   if (loading) {                                                                                                                                              │
 │     38     return <ActivityIndicator animating={true} style={styles.centered} />;                                                                                    │
 │     39   }                                                                                                                                                           │
 │     40                                                                                                                                                               │
 │     41   if (error) {                                                                                                                                                │
 │     42     return <Text style={styles.centered}>Error: {error.message}</Text>;                                                                                       │
 │     43   }                                                                                                                                                           │
 │     44                                                                                                                                                               │
 │     45   return (                                                                                                                                                    │
 │     46     <View style={styles.container}>                                                                                                                           │
 │     47       <Text variant="headlineLarge">Welcome, {data?.me?.firstName || 'User'}!</Text>                                                                          │
 │     48       <Text variant="bodyLarge" style={styles.username}>Your username is: {data?.me?.username}</Text>                                                         │
 │     49       <Button                                                                                                                                                 │
 │     50         mode="contained"                                                                                                                                      │
 │     51         onPress={logout}                                                                                                                                      │
 │     52         style={styles.button}                                                                                                                                 │
 │     53         icon="logout"                                                                                                                                         │
 │     54       >                                                                                                                                                       │
 │     55         Logout                                                                                                                                                │
 │     56       </Button>                                                                                                                                               │
 │     57     </View>                                                                                                                                                   │
 │     58   );                                                                                                                                                          │
 │     59 };                                                                                                                                                            │
 │     60                                                                                                                                                               │
 │     61 const styles = StyleSheet.create({                                                                                                                            │
 │     62   centered: {                                                                                                                                                 │
 │     63     flex: 1,                                                                                                                                                  │
 │     64     justifyContent: 'center',                                                                                                                                 │
 │     65     alignItems: 'center',                                                                                                                                     │
 │     66   },                                                                                                                                                          │
 │     67   container: {                                                                                                                                                │
 │     68     flex: 1,                                                                                                                                                  │
 │     69     justifyContent: 'center',                                                                                                                                 │
 │     70     alignItems: 'center',                                                                                                                                     │
 │     71     padding: 20,                                                                                                                                              │
 │     72   },                                                                                                                                                          │
 │     73   username: {                                                                                                                                                 │
 │     74     marginVertical: 16,                                                                                                                                       │
 │     75   },                                                                                                                                                          │
 │     76   button: {                                                                                                                                                   │
 │     77     marginTop: 20,                                                                                                                                            │
 │     78   },                                                                                                                                                          │
 │     79 });                                                                                                                                                           │
 │     80                                                                                                                                                               │
 │     81 export default HomePage;                                                                                                                                      │
 │     82 ```                                                                                                                                                           │
 │     83                                                                                                                                                               │
 │     84 ## 2. Implement the Authenticated Apollo Link                                                                                                                 │
 │     85                                                                                                                                                               │
 │     86 Update `src/api/apollo.ts` to include an `authLink` that retrieves the token from `AsyncStorage`.                                                             │
 │     87                                                                                                                                                               │
 │     88 **`src/api/apollo.ts`:**                                                                                                                                      │
 │     89 ```ts                                                                                                                                                         │
 │     90 import { ApolloClient, InMemoryCache, createHttpLink } from '@apollo/client';                                                                                 │
 │     91 import { setContext } from '@apollo/client/link/context';                                                                                                     │
 │     92 import AsyncStorage from '@react-native-async-storage/async-storage';                                                                                         │
 │     93                                                                                                                                                               │
 │     94 const httpLink = createHttpLink({                                                                                                                             │
 │     95   uri: 'https://blobfishapp.duckdns.org/graphql',                                                                                                             │
 │     96 });                                                                                                                                                           │
 │     97                                                                                                                                                               │
 │     98 const authLink = setContext(async (_, { headers }) => {                                                                                                       │
 │     99   const token = await AsyncStorage.getItem('token');                                                                                                          │
 │    100   return {                                                                                                                                                    │
 │    101     headers: {                                                                                                                                                │
 │    102       ...headers,                                                                                                                                             │
 │    103       authorization: token ? `Bearer ${token}` : '',                                                                                                          │
 │    104     },                                                                                                                                                        │
 │    105   };                                                                                                                                                          │
 │    106 });                                                                                                                                                           │
 │    107                                                                                                                                                               │
 │    108 const client = new ApolloClient({                                                                                                                             │
 │    109   link: authLink.concat(httpLink),                                                                                                                            │
 │    110   cache: new InMemoryCache(),                                                                                                                                 │
 │    111 });                                                                                                                                                           │
 │    112                                                                                                                                                               │
 │    113 export default client;                                                                                                                                        │
 │    114 ```                                                                                                                                                           │
 │    115                                                                                                                                                               │
 │    116 ## 3. Implement Basic Routing                                                                                                                                 │
 │    117                                                                                                                                                               │
 │    118 Create a new root component `src/components/Router.tsx` to handle the navigation logic.                                                                       │
 │    119                                                                                                                                                               │
 │    120 **`src/components/Router.tsx`:**                                                                                                                              │
 │    121 ```tsx                                                                                                                                                        │
 │    122 import React from 'react';                                                                                                                                    │
 │    123 import { useAuth } from '../contexts/AuthContext';                                                                                                            │
 │    124 import HomePage from '../pages/HomePage';                                                                                                                     │
 │    125 import LoginPage from '../pages/LoginPage';                                                                                                                   │
 │    126 import { ActivityIndicator, View, StyleSheet } from 'react-native';                                                                                           │
 │    127                                                                                                                                                               │
 │    128 const Router = () => {                                                                                                                                        │
 │    129   const { token, isLoading } = useAuth();                                                                                                                     │
 │    130                                                                                                                                                               │
 │    131   if (isLoading) {                                                                                                                                            │
 │    132     return (                                                                                                                                                  │
 │    133       <View style={styles.centered}>                                                                                                                          │
 │    134         <ActivityIndicator size="large" />                                                                                                                    │
 │    135       </View>                                                                                                                                                 │
 │    136     );                                                                                                                                                        │
 │    137   }                                                                                                                                                           │
 │    138                                                                                                                                                               │
 │    139   return token ? <HomePage /> : <LoginPage />;                                                                                                                │
 │    140 };                                                                                                                                                            │
 │    141                                                                                                                                                               │
 │    142 const styles = StyleSheet.create({                                                                                                                            │
 │    143   centered: {                                                                                                                                                 │
 │    144     flex: 1,                                                                                                                                                  │
 │    145     justifyContent: 'center',                                                                                                                                 │
 │    146     alignItems: 'center',                                                                                                                                     │
 │    147   },                                                                                                                                                          │
 │    148 });                                                                                                                                                           │
 │    149                                                                                                                                                               │
 │    150 export default Router;                                                                                                                                        │
 │    151 ```                                                                                                                                                           │
 │    152                                                                                                                                                               │
 │    153 **`App.tsx`:**                                                                                                                                                │
 │    154 Update the main App component to use the new `Router`.                                                                                                        │
 │    155 ```tsx                                                                                                                                                        │
 │    156 import React from 'react';                                                                                                                                    │
 │    157 import { PaperProvider } from 'react-native-paper';                                                                                                           │
 │    158 import { SafeAreaView, StyleSheet } from 'react-native';                                                                                                      │
 │    159 import { ApolloProvider } from '@apollo/client';                                                                                                              │
 │    160 import { AuthProvider } from './src/contexts/AuthContext';                                                                                                    │
 │    161 import client from './src/api/apollo';                                                                                                                        │
 │    162 import Router from './src/components/Router';                                                                                                                 │
 │    163                                                                                                                                                               │
 │    164 export default function App() {                                                                                                                               │
 │    165   return (                                                                                                                                                    │
 │    166     <AuthProvider>                                                                                                                                            │
 │    167       <ApolloProvider client={client}>                                                                                                                        │
 │    168         <PaperProvider>                                                                                                                                       │
 │    169           <SafeAreaView style={styles.container}>                                                                                                             │
 │    170             <Router />                                                                                                                                        │
 │    171           </SafeAreaView>                                                                                                                                     │
 │    172         </PaperProvider>                                                                                                                                      │
 │    173       </ApolloProvider>                                                                                                                                       │
 │    174     </AuthProvider>                                                                                                                                           │
 │    175   );                                                                                                                                                          │
 │    176 }                                                                                                                                                             │
 │    177                                                                                                                                                               │
 │    178 const styles = StyleSheet.create({                                                                                                                            │
 │    179   container: {                                                                                                                                                │
 │    180     flex: 1,                                                                                                                                                  │
 │    181   },                                                                                                                                                          │
 │    182 });                                                                                                                                                           │
 │    183 ```                                                                                                                                                           │
 │    184                                                                                                                                                               │
 │    185 ## 4. Verification                                                                                                                                            │
 │    186                                                                                                                                                               │
 │    187 1.  Run the application. It should show the `LoginPage`.                                                                                                      │
 │    188 2.  Log in with correct credentials.                                                                                                                          │
 │    189 3.  Upon success, you should be navigated to the `HomePage`, which should display your name.                                                                  │
 │    190 4.  Click "Logout". You should be returned to the `LoginPage`.                                                                                                │
 │    191 5.  Fully close and restart the app. It should briefly show a loading indicator and then go directly to the `HomePage`, demonstrating that the session is     │
 │        persisted.                                                                                                                                                    │
 ╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
✦ I will now create the fourteenth prompt file.
 ╭──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
 │ ✔  WriteFile Writing to 14-feat(mobileap...-refresh-link.md                                                                                                          │
 │                                                                                                                                                                      │
 │    ... first 89 lines hidden ...                                                                                                                                     │
 │     90     backgroundColor: 'rgba(0, 0, 0, 0.5)',                                                                                                                    │
 │     91   },                                                                                                                                                          │
 │     92   content: {                                                                                                                                                  │
 │     93     backgroundColor: 'white',                                                                                                                                 │
 │     94     padding: 20,                                                                                                                                              │
 │     95     borderRadius: 10,                                                                                                                                         │
 │     96     alignItems: 'center',                                                                                                                                     │
 │     97   },                                                                                                                                                          │
 │     98   text: {                                                                                                                                                     │
 │     99     marginTop: 16,                                                                                                                                            │
 │    100     fontSize: 16,                                                                                                                                             │
 │    101   },                                                                                                                                                          │
 │    102 });                                                                                                                                                           │
 │    103                                                                                                                                                               │
 │    104 export default GlobalLoading;                                                                                                                                 │
 │    105 ```                                                                                                                                                           │
 │    106                                                                                                                                                               │
 │    107 **`App.tsx`:**                                                                                                                                                │
 │    108 Render this component in your app.                                                                                                                            │
 │    109 ```tsx                                                                                                                                                        │
 │    110 // ... imports                                                                                                                                                │
 │    111 import Router from './src/components/Router';                                                                                                                 │
 │    112 import GlobalLoading from './src/components/GlobalLoading';                                                                                                   │
 │    113                                                                                                                                                               │
 │    114 export default function App() {                                                                                                                               │
 │    115   return (                                                                                                                                                    │
 │    116     <AuthProvider>                                                                                                                                            │
 │    117       <ApolloProvider client={client}>                                                                                                                        │
 │    118         <PaperProvider>                                                                                                                                       │
 │    119           <SafeAreaView style={styles.container}>                                                                                                             │
 │    120             <Router />                                                                                                                                        │
 │    121             <GlobalLoading />                                                                                                                                 │
 │    122           </SafeAreaView>                                                                                                                                     │
 │    123         </PaperProvider>                                                                                                                                      │
 │    124       </ApolloProvider>                                                                                                                                       │
 │    125     </AuthProvider>                                                                                                                                           │
 │    126   );                                                                                                                                                          │
 │    127 }                                                                                                                                                             │
 │    128 // ... styles                                                                                                                                                 │
 │    129 ```                                                                                                                                                           │
 │    130                                                                                                                                                               │
 │    131 ## 3. Implement the Token Refresh Link                                                                                                                        │
 │    132                                                                                                                                                               │
 │    133 Update `src/api/apollo.ts` to handle token refresh. This will be very similar to the web implementation.                                                      │
 │    134                                                                                                                                                               │
 │    135 **`src/graphql/mutations.ts`:**                                                                                                                               │
 │    136 Add the `refreshToken` mutation.                                                                                                                              │
 │    137 ```ts                                                                                                                                                         │
 │    138 // ... LOGIN_MUTATION                                                                                                                                         │
 │    139                                                                                                                                                               │
 │    140 export const REFRESH_TOKEN_MUTATION = gql`                                                                                                                    │
 │    141   mutation RefreshToken($refreshToken: String!) {                                                                                                             │
 │    142     refreshToken(input: { refreshToken: $refreshToken }) {                                                                                                    │
 │    143       success                                                                                                                                                 │
 │    144       token                                                                                                                                                   │
 │    145       refreshToken                                                                                                                                            │
 │    146       errors                                                                                                                                                  │
 │    147     }                                                                                                                                                         │
 │    148   }                                                                                                                                                           │
 │    149 `;                                                                                                                                                            │
 │    150 ```                                                                                                                                                           │
 │    151                                                                                                                                                               │
 │    152 **`src/api/apollo.ts`:**                                                                                                                                      │
 │    153 This is a significant update to create the error handling link.                                                                                               │
 │    154 ```ts                                                                                                                                                         │
 │    155 import {                                                                                                                                                      │
 │    156   ApolloClient,                                                                                                                                               │
 │    157   InMemoryCache,                                                                                                                                              │
 │    158   createHttpLink,                                                                                                                                             │
 │    159   from,                                                                                                                                                       │
 │    160   ApolloLink,                                                                                                                                                 │
 │    161 } from '@apollo/client';                                                                                                                                      │
 │    162 import { setContext } from '@apollo/client/link/context';                                                                                                     │
 │    163 import { onError } from '@apollo/client/link/error';                                                                                                          │
 │    164 import AsyncStorage from '@react-native-async-storage/async-storage';                                                                                         │
 │    165 import { REFRESH_TOKEN_MUTATION } from '../graphql/mutations';                                                                                                │
 │    166                                                                                                                                                               │
 │    167 const API_URL = 'https://blobfishapp.duckdns.org/graphql';                                                                                                    │
 │    168                                                                                                                                                               │
 │    169 const refreshClient = new ApolloClient({                                                                                                                      │
 │    170   uri: API_URL,                                                                                                                                               │
 │    171   cache: new InMemoryCache(),                                                                                                                                 │
 │    172 });                                                                                                                                                           │
 │    173                                                                                                                                                               │
 │    174 const httpLink = createHttpLink({                                                                                                                             │
 │    175   uri: API_URL,                                                                                                                                               │
 │    176 });                                                                                                                                                           │
 │    177                                                                                                                                                               │
 │    178 const authLink = setContext(async (_, { headers }) => {                                                                                                       │
 │    179   const token = await AsyncStorage.getItem('token');                                                                                                          │
 │    180   return {                                                                                                                                                    │
 │    181     headers: {                                                                                                                                                │
 │    182       ...headers,                                                                                                                                             │
 │    183       authorization: token ? `Bearer ${token}` : '',                                                                                                          │
 │    184     },                                                                                                                                                        │
 │    185   };                                                                                                                                                          │
 │    186 });                                                                                                                                                           │
 │    187                                                                                                                                                               │
 │    188 const errorLink = (                                                                                                                                           │
 │    189   setIsRefreshing: (isRefreshing: boolean) => void,                                                                                                           │
 │    190   logout: () => Promise<void>                                                                                                                                 │
 │    191 ): ApolloLink =>                                                                                                                                              │
 │    192   onError(({ graphQLErrors, operation, forward }) => {                                                                                                        │
 │    193     if (graphQLErrors) {                                                                                                                                      │
 │    194       for (let err of graphQLErrors) {                                                                                                                        │
 │    195         if (err.message.includes('Unauthorized')) {                                                                                                           │
 │    196           setIsRefreshing(true);                                                                                                                              │
 │    197           AsyncStorage.getItem('refreshToken')                                                                                                                │
 │    198             .then((refreshToken) => {                                                                                                                         │
 │    199               if (!refreshToken) {                                                                                                                            │
 │    200                 throw new Error('No refresh token');                                                                                                          │
 │    201               }                                                                                                                                               │
 │    202               return refreshClient.mutate({                                                                                                                   │
 │    203                 mutation: REFRESH_TOKEN_MUTATION,                                                                                                             │
 │    204                 variables: { refreshToken },                                                                                                                  │
 │    205               });                                                                                                                                             │
 │    206             })                                                                                                                                                │
 │    207             .then(({ data }) => {                                                                                                                             │
 │    208               const newTokens = data?.refreshToken;                                                                                                           │
 │    209               if (newTokens?.success) {                                                                                                                       │
 │    210                 AsyncStorage.setItem('token', newTokens.token);                                                                                               │
 │    211                 AsyncStorage.setItem('refreshToken', newTokens.refreshToken);                                                                                 │
 │    212                                                                                                                                                               │
 │    213                 const oldHeaders = operation.getContext().headers;                                                                                            │
 │    214                 operation.setContext({                                                                                                                        │
 │    215                   headers: { ...oldHeaders, authorization: `Bearer ${newTokens.token}` },                                                                     │
 │    216                 });                                                                                                                                           │
 │    217                 return forward(operation);                                                                                                                    │
 │    218               } else {                                                                                                                                        │
 │    219                 throw new Error('Refresh failed');                                                                                                            │
 │    220               }                                                                                                                                               │
 │    221             })                                                                                                                                                │
 │    222             .catch(() => {                                                                                                                                    │
 │    223               logout();                                                                                                                                       │
 │    224             })                                                                                                                                                │
 │    225             .finally(() => {                                                                                                                                  │
 │    226               setIsRefreshing(false);                                                                                                                         │
 │    227             });                                                                                                                                               │
 │    228         }                                                                                                                                                     │
 │    229       }                                                                                                                                                       │
 │    230     }                                                                                                                                                         │
 │    231   });                                                                                                                                                         │
 │    232                                                                                                                                                               │
 │    233 export const createApolloClient = (                                                                                                                           │
 │    234   setIsRefreshing: (isRefreshing: boolean) => void,                                                                                                           │
 │    235   baseLogout: () => Promise<void>                                                                                                                             │
 │    236 ) => {                                                                                                                                                        │
 │    237   const logout = async () => {                                                                                                                                │
 │    238     await baseLogout();                                                                                                                                       │
 │    239     await client.clearStore();                                                                                                                                │
 │    240   };                                                                                                                                                          │
 │    241                                                                                                                                                               │
 │    242   const client = new ApolloClient({                                                                                                                           │
 │    243     link: from([errorLink(setIsRefreshing, logout), authLink, httpLink]),                                                                                     │
 │    244     cache: new InMemoryCache(),                                                                                                                               │
 │    245   });                                                                                                                                                         │
 │    246                                                                                                                                                               │
 │    247   return client;                                                                                                                                              │
 │    248 };                                                                                                                                                            │
 │    249 ```                                                                                                                                                           │
 │    250                                                                                                                                                               │
 │    251 ## 4. Update Application Entrypoint                                                                                                                           │
 │    252                                                                                                                                                               │
 │    253 Refactor `App.tsx` to use the new client factory.                                                                                                             │
 │    254                                                                                                                                                               │
 │    255 **`App.tsx`:**                                                                                                                                                │
 │    256 ```tsx                                                                                                                                                        │
 │    257 import React from 'react';                                                                                                                                    │
 │    258 import { PaperProvider } from 'react-native-paper';                                                                                                           │
 │    259 import { SafeAreaView, StyleSheet } from 'react-native';                                                                                                      │
 │    260 import { ApolloProvider } from '@apollo/client';                                                                                                              │
 │    261 import { AuthProvider, useAuth } from './src/contexts/AuthContext';                                                                                           │
 │    262 import { createApolloClient } from './src/api/apollo';                                                                                                        │
 │    263 import Router from './src/components/Router';                                                                                                                 │
 │    264 import GlobalLoading from './src/components/GlobalLoading';                                                                                                   │
 │    265                                                                                                                                                               │
 │    266 const Main = () => {                                                                                                                                          │
 │    267   const { setIsRefreshing, logout } = useAuth();                                                                                                              │
 │    268   const client = createApolloClient(setIsRefreshing, logout);                                                                                                 │
 │    269                                                                                                                                                               │
 │    270   return (                                                                                                                                                    │
 │    271     <ApolloProvider client={client}>                                                                                                                          │
 │    272       <PaperProvider>                                                                                                                                         │
 │    273         <SafeAreaView style={styles.container}>                                                                                                               │
 │    274           <Router />                                                                                                                                          │
 │    275           <GlobalLoading />                                                                                                                                   │
 │    276         </SafeAreaView>                                                                                                                                       │
 │    277       </PaperProvider>                                                                                                                                        │
 │    278     </ApolloProvider>                                                                                                                                         │
 │    279   );                                                                                                                                                          │
 │    280 };                                                                                                                                                            │
 │    281                                                                                                                                                               │
 │    282 export default function App() {                                                                                                                               │
 │    283   return (                                                                                                                                                    │
 │    284     <AuthProvider>                                                                                                                                            │
 │    285       <Main />                                                                                                                                                │
 │    286     </AuthProvider>                                                                                                                                           │
 │    287   );                                                                                                                                                          │
 │    288 }                                                                                                                                                             │
 │    289                                                                                                                                                               │
 │    290 const styles = StyleSheet.create({                                                                                                                            │
 │    291   container: {                                                                                                                                                │
 │    292     flex: 1,                                                                                                                                                  │
 │    293   },                                                                                                                                                          │
 │    294 });                                                                                                                                                           │
 │    295 ```                                                                                                                                                           │
 │    296                                                                                                                                                               │
 │    297 ## 5. Verification                                                                                                                                            │
 │    298                                                                                                                                                               │
 │    299 1.  **Simulate Expired Token**: Log in normally. You'll need a way to invalidate the token. One way is to use a proxy to intercept and modify the request,    │
 │        but a simpler way is to have a "test" button on the `HomePage` that manually sets an invalid token in `AsyncStorage` and then triggers a refetch of the `me`  │
 │        query.                                                                                                                                                        │
 │    300 2.  **Observe Behavior**:                                                                                                                                     │
 │    301     *   The `me` query should fail.                                                                                                                           │
 │    302     *   The "Refreshing session..." modal should appear.                                                                                                      │
 │    303     *   A `refreshToken` mutation should be sent.                                                                                                             │
 │    304     *   If successful, the modal disappears, and the `HomePage` loads.                                                                                        │
 │    305     *   If it fails, the user is logged out and returned to the `LoginPage`.                                                                                  │
 ╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
✦ Finally, I will create the fifteenth prompt file for the deployment documentation.
 ╭──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
 │ ✔  WriteFile Writing to 15-docs-create-d...documentation.md                                                                                                          │
 │                                                                                                                                                                      │
 │      1 You are an expert technical writer. Your task is to create the deployment documentation for both the web and mobile applications as specified.                │
 │      2                                                                                                                                                               │
 │      3 **Commit Title:** `docs: create deployment documentation`                                                                                                     │
 │      4                                                                                                                                                               │
 │      5 Create a new file named `DEPLOYMENT.md` in the root of the `monolith-frontend` directory.                                                                     │
 │      6                                                                                                                                                               │
 │      7 **`DEPLOYMENT.md`:**                                                                                                                                          │
 │      8 ```markdown                                                                                                                                                   │
 │      9 # Deployment Instructions                                                                                                                                     │
 │     10                                                                                                                                                               │
 │     11 This document provides instructions for deploying the web and mobile applications.                                                                            │
 │     12                                                                                                                                                               │
 │     13 ## Web Application (`webapp`)                                                                                                                                 │
 │     14                                                                                                                                                               │
 │     15 The web application is a standard Vite React project. It needs to be bundled into a set of static assets (HTML, CSS, JavaScript) which can then be served by  │
 │        the backend.                                                                                                                                                  │
 │     16                                                                                                                                                               │
 │     17 ### 1. Build the Application                                                                                                                                  │
 │     18                                                                                                                                                               │
 │     19 Navigate to the web application's directory:                                                                                                                  │
 │     20 ```bash                                                                                                                                                       │
 │     21 cd webapp                                                                                                                                                     │
 │     22 ```                                                                                                                                                           │
 │     23                                                                                                                                                               │
 │     24 Run the build command. This will compile the TypeScript and React code and bundle everything into a `dist` directory.                                         │
 │     25 ```bash                                                                                                                                                       │
 │     26 npm run build                                                                                                                                                 │
 │     27 ```                                                                                                                                                           │
 │     28                                                                                                                                                               │
 │     29 ### 2. Copy Assets to Backend                                                                                                                                 │
 │     30                                                                                                                                                               │
 │     31 After the build is complete, a `dist` directory will be created inside the `webapp` folder. This directory contains the `index.html` file and `assets/`       │
 │        subdirectory with all the necessary CSS and JavaScript files.                                                                                                 │
 │     32                                                                                                                                                               │
 │     33 **You must manually copy the entire contents of this `dist` directory into the `static/` directory of the backend Rust server.**                              │
 │     34                                                                                                                                                               │
 │     35 The backend is configured to serve files from its `static/` directory. Once the files are copied, the web application will be live and accessible through     │
 │        the backend's address.                                                                                                                                        │
 │     36                                                                                                                                                               │
 │     37 ## Mobile Application (`mobileapp`)                                                                                                                           │
 │     38                                                                                                                                                               │
 │     39 The mobile application is built with Expo and is intended for distribution to family members via TestFlight on iOS.                                           │
 │     40                                                                                                                                                               │
 │     41 ### 1. Prerequisites                                                                                                                                          │
 │     42                                                                                                                                                               │
 │     43 Before you can build and distribute the app, you need:                                                                                                        │
 │     44 - An active **Apple Developer Program** membership.                                                                                                           │
 │     45 - **Expo CLI** installed on your machine (`npm install -g expo-cli`).                                                                                         │
 │     46 - **EAS CLI** installed on your machine (`npm install -g eas-cli`).                                                                                           │
 │     47 - Apple's **Transporter** app installed on your Mac (available from the Mac App Store).                                                                       │
 │     48 - An Expo account. Log in with `eas login`.                                                                                                                   │
 │     49                                                                                                                                                               │
 │     50 ### 2. Configure the Application                                                                                                                              │
 │     51                                                                                                                                                               │
 │     52 Open the `mobileapp/app.json` file. You must configure the `ios.bundleIdentifier`. This is a unique string that identifies your app, typically in reverse     │
 │        domain name notation (e.g., `com.yourfamily.familymonolith`).                                                                                                 │
 │     53                                                                                                                                                               │
 │     54 Example `app.json` snippet:                                                                                                                                   │
 │     55 ```json                                                                                                                                                       │
 │     56 {                                                                                                                                                             │
 │     57   "expo": {                                                                                                                                                   │
 │     58     "name": "Family Monolith",                                                                                                                                │
 │     59     "slug": "family-monolith-mobile",                                                                                                                         │
 │     60     // ... other settings                                                                                                                                     │
 │     61     "ios": {                                                                                                                                                  │
 │     62       "supportsTablet": true,                                                                                                                                 │
 │     63       "bundleIdentifier": "com.yourname.familymonolith"                                                                                                       │
 │     64     }                                                                                                                                                         │
 │     65   }                                                                                                                                                           │
 │     66 }                                                                                                                                                             │
 │     67 ```                                                                                                                                                           │
 │     68 You will also need to configure your Apple Team ID in `eas.json` after running `eas build:configure`.                                                         │
 │     69                                                                                                                                                               │
 │     70 ### 3. Build the iOS Application                                                                                                                              │
 │     71                                                                                                                                                               │
 │     72 Expo Application Services (EAS) will build a native `.ipa` file for you in the cloud.                                                                         │
 │     73                                                                                                                                                               │
 │     74 Navigate to the mobile app's directory:                                                                                                                       │
 │     75 ```bash                                                                                                                                                       │
 │     76 cd mobileapp                                                                                                                                                  │
 │     77 ```                                                                                                                                                           │
 │     78                                                                                                                                                               │
 │     79 Start the build process:                                                                                                                                      │
 │     80 ```bash                                                                                                                                                       │
 │     81 eas build --platform ios                                                                                                                                      │
 │     82 ```                                                                                                                                                           │
 │     83                                                                                                                                                               │
 │     84 EAS will guide you through the process. It will ask you to log in to your Apple Developer account and may create new provisioning profiles and certificates   │
 │        for you if needed. This process can take 30-60 minutes.                                                                                                       │
 │     85                                                                                                                                                               │
 │     86 ### 4. Upload to App Store Connect                                                                                                                            │
 │     87                                                                                                                                                               │
 │     88 Once the build is complete, EAS will provide a link to download the `.ipa` file.                                                                              │
 │     89                                                                                                                                                               │
 │     90 1.  Download the `.ipa` file to your Mac.                                                                                                                     │
 │     91 2.  Open the **Transporter** application.                                                                                                                     │
 │     92 3.  Click "Add App" and select the `.ipa` file you downloaded.                                                                                                │
 │     93 4.  Follow the prompts in Transporter to upload the build to App Store Connect. This can also take some time depending on the file size.                      │
 │     94                                                                                                                                                               │
 │     95 ### 5. Distribute via TestFlight                                                                                                                              │
 │     96                                                                                                                                                               │
 │     97 1.  Log in to [App Store Connect](https://appstoreconnect.apple.com/).                                                                                        │
 │     98 2.  Go to "My Apps" and select your application.                                                                                                              │
 │     99 3.  Navigate to the "TestFlight" tab.                                                                                                                         │
 │    100 4.  Your uploaded build should appear here after it finishes processing (this can take anywhere from a few minutes to a few hours).                           │
 │    101 5.  You will need to provide some initial information for Beta App Review if this is the first build.                                                         │
 │    102 6.  To add family members, go to "Internal Testing" or "External Testing" on the left sidebar. Add their Apple ID emails as testers. They will receive an     │
 │        email invitation with instructions on how to download the TestFlight app and install your application.                                                        │
 │    103 ```                                                                                                                                                           │
 │    104                                                                                                                                                               │
 │    105 ## Verification                                                                                                                                               │
 │    106                                                                                                                                                               │
 │    107 Read the generated `DEPLOYMENT.md` file. Ensure that the steps are clear, accurate, and provide enough detail for a developer to successfully deploy both     │
 │        applications.                                                                                                                                                 │
 ╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
✦ I have created all the necessary prompt files to implement the project as specified. We have 15 steps in total, covering the web app, the mobile app, and the final deployment
  documentation.

  The prompts are broken down into small, iterative chunks, each with a clear goal and verification steps. They are now ready to be used by a code-generation LLM.
